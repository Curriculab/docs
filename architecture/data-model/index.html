<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-architecture/data-model" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Data Model | Curriculab</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://curriculab.github.io/docs/architecture/data-model"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data Model | Curriculab"><meta data-rh="true" name="description" content="Status: Living document — update whenever entities or attributes change."><meta data-rh="true" property="og:description" content="Status: Living document — update whenever entities or attributes change."><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://curriculab.github.io/docs/architecture/data-model"><link data-rh="true" rel="alternate" href="https://curriculab.github.io/docs/architecture/data-model" hreflang="en"><link data-rh="true" rel="alternate" href="https://curriculab.github.io/docs/architecture/data-model" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Data Model","item":"https://curriculab.github.io/docs/architecture/data-model"}]}</script><link rel="stylesheet" href="/docs/assets/css/styles.00f2ee08.css">
<script src="/docs/assets/js/runtime~main.1299c14e.js" defer="defer"></script>
<script src="/docs/assets/js/main.35aa7556.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><b class="navbar__title text--truncate">Curriculab</b></a><a class="navbar__item navbar__link" href="/docs/requirements/">Requirements</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/architecture/data-model">Architecture</a><a class="navbar__item navbar__link" href="/docs/planning/story-map">Planning</a><a class="navbar__item navbar__link" href="/docs/decisions/">ADRs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Curriculab/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/architecture/data-model"><span title="Data Model" class="linkLabel_WmDU">Data Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/architecture/non-functional-requirements"><span title="Non-Functional Requirements" class="linkLabel_WmDU">Non-Functional Requirements</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Data Model</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Data Model</h1></header>
<blockquote>
<p><strong>Status:</strong> Living document — update whenever entities or attributes change.
<strong>Last updated:</strong> 2026-02-18</p>
</blockquote>
<p>This document defines the canonical entity model for <strong>Curriculab</strong>. It is the authoritative reference for database schema design, API contract design, and code generation.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-conventions">1. Conventions<a href="#1-conventions" class="hash-link" aria-label="Direct link to 1. Conventions" title="Direct link to 1. Conventions" translate="no">​</a></h2>
<table><thead><tr><th>Convention</th><th>Rule</th></tr></thead><tbody><tr><td><strong>Primary keys</strong></td><td>All PKs are <code>uuid</code> (v4) unless noted</td></tr><tr><td><strong>Timestamps</strong></td><td>All timestamps are <code>timestamptz</code> stored in UTC</td></tr><tr><td><strong>Implied columns</strong></td><td><code>created_at timestamptz NOT NULL DEFAULT now()</code> and <code>updated_at timestamptz NOT NULL DEFAULT now()</code> are present on every entity and omitted from entity tables to reduce noise</td></tr><tr><td><strong>Naming</strong></td><td>Attributes use <code>snake_case</code>; entity names use <code>PascalCase</code></td></tr><tr><td><strong>Soft deletes</strong></td><td>Entities use a <code>status</code> enum (e.g., <code>active</code>/<code>inactive</code>/<code>archived</code>) rather than physical deletion</td></tr><tr><td><strong>Calculated fields</strong></td><td>Fields marked <code>[calculated]</code> are derived at the application layer or via a DB trigger/materialized view; they are not raw stored columns unless noted</td></tr><tr><td><strong>Enums</strong></td><td>Inline as <code>enum(val1, val2, …)</code> in the Type column</td></tr><tr><td><strong>Arrays</strong></td><td><code>text[]</code> denotes a PostgreSQL array of strings</td></tr><tr><td><strong>JSON blobs</strong></td><td><code>jsonb</code> for semi-structured or variable-shape data</td></tr><tr><td><strong>Cross-cluster FKs</strong></td><td>Shown in entity tables with a cluster reference in the Notes column (e.g., <em>→ Cluster 1: User</em>)</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-domain-overview">2. Domain Overview<a href="#2-domain-overview" class="hash-link" aria-label="Direct link to 2. Domain Overview" title="Direct link to 2. Domain Overview" translate="no">​</a></h2>
<p>The six domain clusters and their primary dependency arrows. Arrows point from the cluster that is <em>depended on</em> to the cluster that <em>depends on it</em>.</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flowchart TD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IA[&quot;**Cluster 1**\nIdentity &amp; Access\n_(User, Session, …)_&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OS[&quot;**Cluster 2**\nOrganizational Structure\n&amp; Curriculum\n_(College, Department, Course, …)_&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AC[&quot;**Cluster 3**\nAcademic Calendar\n&amp; Scheduling\n_(Term, Section, …)_&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SP[&quot;**Cluster 4**\nStudent Profile\n&amp; Registration\n_(Student, Enrollment, …)_&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AR[&quot;**Cluster 5**\nAdvising, Records\n&amp; Graduation\n_(AdvisorAssignment, Transcript, …)_&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BL[&quot;**Cluster 6**\nBilling, Transfer Credit,\nDocuments &amp; Communications\n_(Charge, Payment, Notification, …)_&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IA --&gt; OS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IA --&gt; AC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IA --&gt; SP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OS --&gt; AC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OS --&gt; SP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OS --&gt; AR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AC --&gt; SP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SP --&gt; AR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SP --&gt; BL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AR --&gt; BL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IA --&gt; BL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OS --&gt; BL</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-entity-catalog">3. Entity Catalog<a href="#3-entity-catalog" class="hash-link" aria-label="Direct link to 3. Entity Catalog" title="Direct link to 3. Entity Catalog" translate="no">​</a></h2>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-1--identity--access">Cluster 1 — Identity &amp; Access<a href="#cluster-1--identity--access" class="hash-link" aria-label="Direct link to Cluster 1 — Identity &amp; Access" title="Direct link to Cluster 1 — Identity &amp; Access" translate="no">​</a></h3>
<p><strong>Entities:</strong> User · Session · TwoFactorEnrollment · PasswordResetToken · AuditLog · ApiConsumer</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">erDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ Session : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o| TwoFactorEnrollment : &quot;enrolls in&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ PasswordResetToken : &quot;requests&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ AuditLog : &quot;generates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ ApiConsumer : &quot;owns&quot;</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="user">User<a href="#user" class="hash-link" aria-label="Direct link to User" title="Direct link to User" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>email</td><td>text</td><td>NOT NULL, UNIQUE</td><td></td></tr><tr><td>password_hash</td><td>text</td><td>nullable</td><td>Null for SSO-only accounts</td></tr><tr><td>role</td><td>enum(student, instructor, advisor, academic_staff, registrar, administrator)</td><td>NOT NULL</td><td>Single role per user; RBAC enforced at application layer</td></tr><tr><td>status</td><td>enum(active, inactive, suspended, pending)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr><tr><td>first_name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>last_name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>phone</td><td>text</td><td>nullable</td><td></td></tr><tr><td>sso_provider</td><td>text</td><td>nullable</td><td>e.g., <code>google</code>, <code>saml</code></td></tr><tr><td>sso_subject</td><td>text</td><td>nullable</td><td>External identity provider subject ID</td></tr><tr><td>last_login_at</td><td>timestamptz</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="session">Session<a href="#session" class="hash-link" aria-label="Direct link to Session" title="Direct link to Session" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td></td></tr><tr><td>token_hash</td><td>text</td><td>NOT NULL, UNIQUE</td><td>SHA-256 of the bearer token</td></tr><tr><td>ip_address</td><td>inet</td><td>nullable</td><td></td></tr><tr><td>user_agent</td><td>text</td><td>nullable</td><td></td></tr><tr><td>expires_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>revoked_at</td><td>timestamptz</td><td>nullable</td><td>Null while active</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="twofactorenrollment">TwoFactorEnrollment<a href="#twofactorenrollment" class="hash-link" aria-label="Direct link to TwoFactorEnrollment" title="Direct link to TwoFactorEnrollment" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>user_id</td><td>uuid</td><td>NOT NULL, FK → User, UNIQUE</td><td>One enrollment per user</td></tr><tr><td>method</td><td>enum(totp, sms, email)</td><td>NOT NULL</td><td></td></tr><tr><td>secret_encrypted</td><td>text</td><td>NOT NULL</td><td>AES-256 encrypted TOTP secret or phone/email</td></tr><tr><td>phone</td><td>text</td><td>nullable</td><td>Required when method = sms</td></tr><tr><td>verified</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td></td></tr><tr><td>enrolled_at</td><td>timestamptz</td><td>nullable</td><td>Set when verified = true</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="passwordresettoken">PasswordResetToken<a href="#passwordresettoken" class="hash-link" aria-label="Direct link to PasswordResetToken" title="Direct link to PasswordResetToken" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td></td></tr><tr><td>token_hash</td><td>text</td><td>NOT NULL, UNIQUE</td><td>SHA-256 of the one-time token</td></tr><tr><td>expires_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>used_at</td><td>timestamptz</td><td>nullable</td><td>Null until redeemed</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="auditlog">AuditLog<a href="#auditlog" class="hash-link" aria-label="Direct link to AuditLog" title="Direct link to AuditLog" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>user_id</td><td>uuid</td><td>nullable, FK → User</td><td>Null for system-generated events</td></tr><tr><td>action</td><td>text</td><td>NOT NULL</td><td>e.g., <code>user.login</code>, <code>enrollment.create</code></td></tr><tr><td>entity_type</td><td>text</td><td>nullable</td><td>e.g., <code>Enrollment</code></td></tr><tr><td>entity_id</td><td>uuid</td><td>nullable</td><td>PK of the affected record</td></tr><tr><td>ip_address</td><td>inet</td><td>nullable</td><td></td></tr><tr><td>user_agent</td><td>text</td><td>nullable</td><td></td></tr><tr><td>metadata</td><td>jsonb</td><td>nullable</td><td>Additional context (old/new values, request body, etc.)</td></tr><tr><td>occurred_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td>Dedicated field; complements created_at</td></tr></tbody></table>
<blockquote>
<p>AuditLog is append-only — no updates or deletes permitted.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="apiconsumer">ApiConsumer<a href="#apiconsumer" class="hash-link" aria-label="Direct link to ApiConsumer" title="Direct link to ApiConsumer" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td>Human-readable label for the consumer</td></tr><tr><td>client_id</td><td>text</td><td>NOT NULL, UNIQUE</td><td>OAuth 2.0 client identifier</td></tr><tr><td>client_secret_hash</td><td>text</td><td>NOT NULL</td><td>Bcrypt hash of the client secret</td></tr><tr><td>scopes</td><td>text[]</td><td>NOT NULL, DEFAULT &#x27;<!-- -->&#x27;</td><td>Allowed OAuth scopes</td></tr><tr><td>owner_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>Staff member responsible for this consumer</td></tr><tr><td>status</td><td>enum(active, revoked)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-2--organizational-structure--curriculum">Cluster 2 — Organizational Structure &amp; Curriculum<a href="#cluster-2--organizational-structure--curriculum" class="hash-link" aria-label="Direct link to Cluster 2 — Organizational Structure &amp; Curriculum" title="Direct link to Cluster 2 — Organizational Structure &amp; Curriculum" translate="no">​</a></h3>
<p><strong>Entities:</strong> College · Department · Building · Room · RoomBlock · Program · RequirementCategory · RequirementSlot · Course · CoursePrerequisite</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">erDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    College ||--|{ Department : &quot;contains&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Department ||--o{ Program : &quot;offers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Department ||--o{ Course : &quot;owns&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Program ||--|{ RequirementCategory : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequirementCategory ||--|{ RequirementSlot : &quot;contains&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequirementSlot }o--o| Course : &quot;maps to&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Course ||--o{ CoursePrerequisite : &quot;requires&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CoursePrerequisite }o--|| Course : &quot;is prerequisite for&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Building ||--|{ Room : &quot;contains&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Room ||--o{ RoomBlock : &quot;blocked by&quot;</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="college">College<a href="#college" class="hash-link" aria-label="Direct link to College" title="Direct link to College" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL, UNIQUE</td><td></td></tr><tr><td>code</td><td>text</td><td>NOT NULL, UNIQUE</td><td>e.g., <code>ENG</code></td></tr><tr><td>dean_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>status</td><td>enum(active, inactive)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="department">Department<a href="#department" class="hash-link" aria-label="Direct link to Department" title="Direct link to Department" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>college_id</td><td>uuid</td><td>NOT NULL, FK → College</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>code</td><td>text</td><td>NOT NULL, UNIQUE</td><td>e.g., <code>CS</code></td></tr><tr><td>chair_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>status</td><td>enum(active, inactive)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="building">Building<a href="#building" class="hash-link" aria-label="Direct link to Building" title="Direct link to Building" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>code</td><td>text</td><td>NOT NULL, UNIQUE</td><td>e.g., <code>SCI</code></td></tr><tr><td>address</td><td>text</td><td>nullable</td><td></td></tr><tr><td>campus</td><td>text</td><td>nullable</td><td>For multi-campus institutions</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="room">Room<a href="#room" class="hash-link" aria-label="Direct link to Room" title="Direct link to Room" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>building_id</td><td>uuid</td><td>NOT NULL, FK → Building</td><td></td></tr><tr><td>room_number</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>capacity</td><td>integer</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>room_type</td><td>enum(classroom, lab, lecture_hall, seminar, other)</td><td>NOT NULL</td><td></td></tr><tr><td>features</td><td>text[]</td><td>NOT NULL, DEFAULT &#x27;<!-- -->&#x27;</td><td>e.g., <code>[&#x27;projector&#x27;,&#x27;whiteboard&#x27;]</code></td></tr><tr><td>status</td><td>enum(active, inactive)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(building_id, room_number)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="roomblock">RoomBlock<a href="#roomblock" class="hash-link" aria-label="Direct link to RoomBlock" title="Direct link to RoomBlock" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>room_id</td><td>uuid</td><td>NOT NULL, FK → Room</td><td></td></tr><tr><td>start_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>end_at</td><td>timestamptz</td><td>NOT NULL</td><td>CHECK end_at &gt; start_at</td></tr><tr><td>reason</td><td>text</td><td>nullable</td><td></td></tr><tr><td>created_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="program">Program<a href="#program" class="hash-link" aria-label="Direct link to Program" title="Direct link to Program" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>department_id</td><td>uuid</td><td>NOT NULL, FK → Department</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>code</td><td>text</td><td>NOT NULL</td><td>e.g., <code>CS-BS</code></td></tr><tr><td>degree_type</td><td>enum(certificate, associate, bachelor, master, doctoral)</td><td>NOT NULL</td><td></td></tr><tr><td>catalog_year</td><td>integer</td><td>NOT NULL</td><td>Four-digit year</td></tr><tr><td>total_credits_required</td><td>integer</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>status</td><td>enum(active, inactive, retired)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(code, catalog_year)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="requirementcategory">RequirementCategory<a href="#requirementcategory" class="hash-link" aria-label="Direct link to RequirementCategory" title="Direct link to RequirementCategory" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>program_id</td><td>uuid</td><td>NOT NULL, FK → Program</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td>e.g., <code>Core Requirements</code></td></tr><tr><td>min_credits</td><td>integer</td><td>NOT NULL, DEFAULT 0</td><td></td></tr><tr><td>max_credits</td><td>integer</td><td>nullable</td><td>Null = no upper limit</td></tr><tr><td>sort_order</td><td>integer</td><td>NOT NULL, DEFAULT 0</td><td>Display ordering</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="requirementslot">RequirementSlot<a href="#requirementslot" class="hash-link" aria-label="Direct link to RequirementSlot" title="Direct link to RequirementSlot" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>category_id</td><td>uuid</td><td>NOT NULL, FK → RequirementCategory</td><td></td></tr><tr><td>course_id</td><td>uuid</td><td>nullable, FK → Course</td><td>Null when is_elective = true</td></tr><tr><td>is_elective</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>Elective slots have no fixed course</td></tr><tr><td>min_grade</td><td>text</td><td>nullable</td><td>e.g., <code>C</code></td></tr><tr><td>notes</td><td>text</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="course">Course<a href="#course" class="hash-link" aria-label="Direct link to Course" title="Direct link to Course" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>department_id</td><td>uuid</td><td>NOT NULL, FK → Department</td><td></td></tr><tr><td>code</td><td>text</td><td>NOT NULL</td><td>e.g., <code>CS101</code></td></tr><tr><td>title</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>credits</td><td>numeric(4,2)</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>description</td><td>text</td><td>nullable</td><td></td></tr><tr><td>delivery_mode</td><td>enum(in_person, online, hybrid)</td><td>NOT NULL, DEFAULT &#x27;in_person&#x27;</td><td>Default mode; sections may override</td></tr><tr><td>status</td><td>enum(active, inactive, retired)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(department_id, code)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="courseprerequisite">CoursePrerequisite<a href="#courseprerequisite" class="hash-link" aria-label="Direct link to CoursePrerequisite" title="Direct link to CoursePrerequisite" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>course_id</td><td>uuid</td><td>NOT NULL, FK → Course</td><td>The course that has this prerequisite</td></tr><tr><td>prerequisite_course_id</td><td>uuid</td><td>NOT NULL, FK → Course</td><td>The required prior course</td></tr><tr><td>min_grade</td><td>text</td><td>nullable</td><td>Minimum passing grade required</td></tr><tr><td>is_concurrent_allowed</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>True = co-requisite (may be taken simultaneously)</td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(course_id, prerequisite_course_id)</code>. CHECK <code>course_id &lt;&gt; prerequisite_course_id</code>.</p>
</blockquote>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-3--academic-calendar--scheduling">Cluster 3 — Academic Calendar &amp; Scheduling<a href="#cluster-3--academic-calendar--scheduling" class="hash-link" aria-label="Direct link to Cluster 3 — Academic Calendar &amp; Scheduling" title="Direct link to Cluster 3 — Academic Calendar &amp; Scheduling" translate="no">​</a></h3>
<p><strong>Entities:</strong> Term · ProgramDeadline · Section · SectionMeetingTime · ReservedSeatGroup</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">erDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Term ||--o{ ProgramDeadline : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Term ||--o{ Section : &quot;hosts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Section ||--o{ SectionMeetingTime : &quot;meets at&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Section ||--o{ ReservedSeatGroup : &quot;reserves seats via&quot;</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="term">Term<a href="#term" class="hash-link" aria-label="Direct link to Term" title="Direct link to Term" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td>e.g., <code>Fall 2026</code></td></tr><tr><td>code</td><td>text</td><td>NOT NULL, UNIQUE</td><td>e.g., <code>2026FA</code></td></tr><tr><td>academic_year</td><td>integer</td><td>NOT NULL</td><td>e.g., <code>2026</code></td></tr><tr><td>term_type</td><td>enum(fall, spring, summer, winter)</td><td>NOT NULL</td><td></td></tr><tr><td>start_date</td><td>date</td><td>NOT NULL</td><td></td></tr><tr><td>end_date</td><td>date</td><td>NOT NULL</td><td>CHECK end_date &gt; start_date</td></tr><tr><td>registration_open_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>registration_close_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>add_drop_deadline</td><td>date</td><td>NOT NULL</td><td></td></tr><tr><td>withdrawal_deadline</td><td>date</td><td>NOT NULL</td><td></td></tr><tr><td>grade_submission_deadline</td><td>date</td><td>NOT NULL</td><td></td></tr><tr><td>status</td><td>enum(upcoming, active, closed, archived)</td><td>NOT NULL, DEFAULT &#x27;upcoming&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="programdeadline">ProgramDeadline<a href="#programdeadline" class="hash-link" aria-label="Direct link to ProgramDeadline" title="Direct link to ProgramDeadline" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>term_id</td><td>uuid</td><td>NOT NULL, FK → Term</td><td></td></tr><tr><td>program_id</td><td>uuid</td><td>nullable, FK → Program</td><td>→ Cluster 2: Program; null = applies to all programs</td></tr><tr><td>deadline_type</td><td>text</td><td>NOT NULL</td><td>e.g., <code>graduation_application</code>, <code>add_drop</code></td></tr><tr><td>deadline_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>notes</td><td>text</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="section">Section<a href="#section" class="hash-link" aria-label="Direct link to Section" title="Direct link to Section" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>course_id</td><td>uuid</td><td>NOT NULL, FK → Course</td><td>→ Cluster 2: Course</td></tr><tr><td>term_id</td><td>uuid</td><td>NOT NULL, FK → Term</td><td></td></tr><tr><td>section_number</td><td>text</td><td>NOT NULL</td><td>e.g., <code>001</code>, <code>002</code></td></tr><tr><td>instructor_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>room_id</td><td>uuid</td><td>nullable, FK → Room</td><td>→ Cluster 2: Room</td></tr><tr><td>delivery_mode</td><td>enum(in_person, online, hybrid)</td><td>NOT NULL</td><td>Overrides course-level default</td></tr><tr><td>capacity</td><td>integer</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>enrolled_count</td><td>integer</td><td>[calculated]</td><td>Derived from active Enrollments</td></tr><tr><td>waitlist_count</td><td>integer</td><td>[calculated]</td><td>Derived from active Waitlist entries</td></tr><tr><td>status</td><td>enum(open, closed, cancelled, waitlist_only)</td><td>NOT NULL, DEFAULT &#x27;open&#x27;</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(course_id, term_id, section_number)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="sectionmeetingtime">SectionMeetingTime<a href="#sectionmeetingtime" class="hash-link" aria-label="Direct link to SectionMeetingTime" title="Direct link to SectionMeetingTime" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>section_id</td><td>uuid</td><td>NOT NULL, FK → Section</td><td></td></tr><tr><td>day_of_week</td><td>enum(mon, tue, wed, thu, fri, sat, sun)</td><td>NOT NULL</td><td></td></tr><tr><td>start_time</td><td>time</td><td>NOT NULL</td><td>Time-of-day without date</td></tr><tr><td>end_time</td><td>time</td><td>NOT NULL</td><td>CHECK end_time &gt; start_time</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="reservedseatgroup">ReservedSeatGroup<a href="#reservedseatgroup" class="hash-link" aria-label="Direct link to ReservedSeatGroup" title="Direct link to ReservedSeatGroup" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>section_id</td><td>uuid</td><td>NOT NULL, FK → Section</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td>e.g., <code>Honors Students</code></td></tr><tr><td>seats_reserved</td><td>integer</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>criteria</td><td>jsonb</td><td>NOT NULL, DEFAULT &#x27;<!-- -->&#x27;</td><td>Eligibility rules (e.g., program, standing)</td></tr><tr><td>priority_order</td><td>integer</td><td>NOT NULL, DEFAULT 0</td><td>Lower = higher priority</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-4--student-profile--registration">Cluster 4 — Student Profile &amp; Registration<a href="#cluster-4--student-profile--registration" class="hash-link" aria-label="Direct link to Cluster 4 — Student Profile &amp; Registration" title="Direct link to Cluster 4 — Student Profile &amp; Registration" translate="no">​</a></h3>
<p><strong>Entities:</strong> Student · EmergencyContact · StudentProgram · Enrollment · GradeCorrection · Waitlist · Hold · CourseChangeHistory</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">erDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ EmergencyContact : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ StudentProgram : &quot;enrolled in&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ Enrollment : &quot;creates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ Waitlist : &quot;joins&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ Hold : &quot;subject to&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enrollment ||--o{ GradeCorrection : &quot;corrected by&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Section ||--o{ Enrollment : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Section ||--o{ Waitlist : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Section ||--o{ CourseChangeHistory : &quot;tracks&quot;</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="student">Student<a href="#student" class="hash-link" aria-label="Direct link to Student" title="Direct link to Student" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK, FK → User</td><td>Joined-table inheritance; shares PK with User</td></tr><tr><td>student_number</td><td>text</td><td>NOT NULL, UNIQUE</td><td>Institutional student ID</td></tr><tr><td>cumulative_gpa</td><td>numeric(4,3)</td><td>[calculated]</td><td>Derived from completed Enrollments</td></tr><tr><td>total_credit_hours_completed</td><td>numeric(6,2)</td><td>[calculated]</td><td>Sum of credits for completed courses</td></tr><tr><td>enrollment_status</td><td>enum(enrolled, part_time, leave_of_absence, graduated, withdrawn)</td><td>NOT NULL, DEFAULT &#x27;enrolled&#x27;</td><td></td></tr><tr><td>photo_url</td><td>text</td><td>nullable</td><td></td></tr><tr><td>admit_date</td><td>date</td><td>NOT NULL</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="emergencycontact">EmergencyContact<a href="#emergencycontact" class="hash-link" aria-label="Direct link to EmergencyContact" title="Direct link to EmergencyContact" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>relationship</td><td>text</td><td>NOT NULL</td><td>e.g., <code>Parent</code>, <code>Spouse</code></td></tr><tr><td>phone</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>email</td><td>text</td><td>nullable</td><td></td></tr><tr><td>is_primary</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="studentprogram">StudentProgram<a href="#studentprogram" class="hash-link" aria-label="Direct link to StudentProgram" title="Direct link to StudentProgram" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td></td></tr><tr><td>program_id</td><td>uuid</td><td>NOT NULL, FK → Program</td><td>→ Cluster 2: Program</td></tr><tr><td>catalog_year</td><td>integer</td><td>NOT NULL</td><td>Catalog year under which the student was admitted</td></tr><tr><td>declared_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>status</td><td>enum(active, completed, withdrawn)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr><tr><td>is_primary</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>One primary program per student (enforced at app layer)</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="enrollment">Enrollment<a href="#enrollment" class="hash-link" aria-label="Direct link to Enrollment" title="Direct link to Enrollment" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td></td></tr><tr><td>section_id</td><td>uuid</td><td>NOT NULL, FK → Section</td><td>→ Cluster 3: Section</td></tr><tr><td>enrolled_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>grade</td><td>text</td><td>nullable</td><td>e.g., <code>A</code>, <code>B+</code>, <code>W</code>; null until grade is posted</td></tr><tr><td>grade_points</td><td>numeric(4,3)</td><td>nullable</td><td>Quality points for GPA calculation</td></tr><tr><td>credits_attempted</td><td>numeric(4,2)</td><td>NOT NULL</td><td>Copy of Section→Course.credits at enrollment time</td></tr><tr><td>completion_status</td><td>enum(enrolled, withdrawn, completed, incomplete, auditing)</td><td>NOT NULL, DEFAULT &#x27;enrolled&#x27;</td><td></td></tr><tr><td>is_repeating</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>True if student previously attempted this course</td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(student_id, section_id)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="gradecorrection">GradeCorrection<a href="#gradecorrection" class="hash-link" aria-label="Direct link to GradeCorrection" title="Direct link to GradeCorrection" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>enrollment_id</td><td>uuid</td><td>NOT NULL, FK → Enrollment</td><td></td></tr><tr><td>old_grade</td><td>text</td><td>NOT NULL</td><td>The grade being replaced</td></tr><tr><td>new_grade</td><td>text</td><td>NOT NULL</td><td>The replacement grade</td></tr><tr><td>reason</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>submitted_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>approved_by</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>submitted_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>approved_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(pending, approved, rejected)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="waitlist">Waitlist<a href="#waitlist" class="hash-link" aria-label="Direct link to Waitlist" title="Direct link to Waitlist" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td></td></tr><tr><td>section_id</td><td>uuid</td><td>NOT NULL, FK → Section</td><td>→ Cluster 3: Section</td></tr><tr><td>position</td><td>integer</td><td>NOT NULL</td><td>Managed by application; 1 = next in line</td></tr><tr><td>joined_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>notified_at</td><td>timestamptz</td><td>nullable</td><td>When seat-offer notification was sent</td></tr><tr><td>expires_at</td><td>timestamptz</td><td>nullable</td><td>Deadline to accept an offered seat</td></tr><tr><td>status</td><td>enum(waiting, offered, declined, expired, enrolled)</td><td>NOT NULL, DEFAULT &#x27;waiting&#x27;</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(student_id, section_id)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="hold">Hold<a href="#hold" class="hash-link" aria-label="Direct link to Hold" title="Direct link to Hold" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td></td></tr><tr><td>hold_type</td><td>enum(financial, academic, administrative, disciplinary)</td><td>NOT NULL</td><td></td></tr><tr><td>description</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>placed_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>placed_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>released_by</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>released_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>blocks_registration</td><td>boolean</td><td>NOT NULL, DEFAULT true</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coursechangehistory">CourseChangeHistory<a href="#coursechangehistory" class="hash-link" aria-label="Direct link to CourseChangeHistory" title="Direct link to CourseChangeHistory" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>section_id</td><td>uuid</td><td>NOT NULL, FK → Section</td><td>→ Cluster 3: Section</td></tr><tr><td>changed_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>changed_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>field_name</td><td>text</td><td>NOT NULL</td><td>Name of the changed attribute</td></tr><tr><td>old_value</td><td>text</td><td>nullable</td><td>String representation of the prior value</td></tr><tr><td>new_value</td><td>text</td><td>nullable</td><td>String representation of the new value</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-5--advising-records--graduation">Cluster 5 — Advising, Records &amp; Graduation<a href="#cluster-5--advising-records--graduation" class="hash-link" aria-label="Direct link to Cluster 5 — Advising, Records &amp; Graduation" title="Direct link to Cluster 5 — Advising, Records &amp; Graduation" translate="no">​</a></h3>
<p><strong>Entities:</strong> AdvisorAssignment · AdvisingAppointment · AdvisingNote · AcademicPlan · AcademicPlanEntry · TranscriptRequest · DegreeAuditSnapshot · GraduationApplication · Ceremony · CommencementRegistration · DiplomaOrder</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">erDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ AdvisorAssignment : &quot;assigned to&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ AdvisingAppointment : &quot;books&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AdvisingAppointment ||--o{ AdvisingNote : &quot;generates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ AcademicPlan : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AcademicPlan ||--|{ AcademicPlanEntry : &quot;contains&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ TranscriptRequest : &quot;requests&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ DegreeAuditSnapshot : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ GraduationApplication : &quot;submits&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GraduationApplication ||--o| DiplomaOrder : &quot;leads to&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ceremony ||--o{ CommencementRegistration : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ CommencementRegistration : &quot;registers for&quot;</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="advisorassignment">AdvisorAssignment<a href="#advisorassignment" class="hash-link" aria-label="Direct link to AdvisorAssignment" title="Direct link to AdvisorAssignment" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>advisor_user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>assigned_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>unassigned_at</td><td>timestamptz</td><td>nullable</td><td>Null while assignment is active</td></tr><tr><td>is_primary</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="advisingappointment">AdvisingAppointment<a href="#advisingappointment" class="hash-link" aria-label="Direct link to AdvisingAppointment" title="Direct link to AdvisingAppointment" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>advisor_user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>scheduled_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>duration_minutes</td><td>integer</td><td>NOT NULL, DEFAULT 30, CHECK &gt; 0</td><td></td></tr><tr><td>location</td><td>text</td><td>nullable</td><td>Physical location or meeting URL</td></tr><tr><td>appointment_type</td><td>enum(in_person, virtual, phone)</td><td>NOT NULL</td><td></td></tr><tr><td>status</td><td>enum(scheduled, completed, cancelled, no_show)</td><td>NOT NULL, DEFAULT &#x27;scheduled&#x27;</td><td></td></tr><tr><td>cancellation_reason</td><td>text</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="advisingnote">AdvisingNote<a href="#advisingnote" class="hash-link" aria-label="Direct link to AdvisingNote" title="Direct link to AdvisingNote" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>appointment_id</td><td>uuid</td><td>nullable, FK → AdvisingAppointment</td><td>Null for standalone notes</td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>advisor_user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>content</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>is_private</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>Private notes not visible to the student</td></tr><tr><td>note_date</td><td>date</td><td>NOT NULL</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="academicplan">AcademicPlan<a href="#academicplan" class="hash-link" aria-label="Direct link to AcademicPlan" title="Direct link to AcademicPlan" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>advisor_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User; null if student-created</td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>target_graduation_term_id</td><td>uuid</td><td>nullable, FK → Term</td><td>→ Cluster 3: Term</td></tr><tr><td>status</td><td>enum(draft, active, completed)</td><td>NOT NULL, DEFAULT &#x27;draft&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="academicplanentry">AcademicPlanEntry<a href="#academicplanentry" class="hash-link" aria-label="Direct link to AcademicPlanEntry" title="Direct link to AcademicPlanEntry" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>plan_id</td><td>uuid</td><td>NOT NULL, FK → AcademicPlan</td><td></td></tr><tr><td>term_id</td><td>uuid</td><td>NOT NULL, FK → Term</td><td>→ Cluster 3: Term</td></tr><tr><td>course_id</td><td>uuid</td><td>NOT NULL, FK → Course</td><td>→ Cluster 2: Course</td></tr><tr><td>note</td><td>text</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(planned, registered, completed, dropped)</td><td>NOT NULL, DEFAULT &#x27;planned&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="transcriptrequest">TranscriptRequest<a href="#transcriptrequest" class="hash-link" aria-label="Direct link to TranscriptRequest" title="Direct link to TranscriptRequest" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>request_type</td><td>enum(official, unofficial)</td><td>NOT NULL</td><td></td></tr><tr><td>delivery_method</td><td>enum(pdf, paper, electronic)</td><td>NOT NULL</td><td></td></tr><tr><td>recipient_name</td><td>text</td><td>nullable</td><td>For third-party delivery</td></tr><tr><td>recipient_email</td><td>text</td><td>nullable</td><td></td></tr><tr><td>recipient_address</td><td>text</td><td>nullable</td><td>Mailing address for paper delivery</td></tr><tr><td>processing_fee</td><td>numeric(8,2)</td><td>NOT NULL, DEFAULT 0</td><td></td></tr><tr><td>payment_status</td><td>enum(unpaid, paid, waived)</td><td>NOT NULL, DEFAULT &#x27;unpaid&#x27;</td><td></td></tr><tr><td>status</td><td>enum(pending, processing, ready, delivered)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr><tr><td>requested_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>delivered_at</td><td>timestamptz</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="degreeauditsnapshot">DegreeAuditSnapshot<a href="#degreeauditsnapshot" class="hash-link" aria-label="Direct link to DegreeAuditSnapshot" title="Direct link to DegreeAuditSnapshot" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>program_id</td><td>uuid</td><td>NOT NULL, FK → Program</td><td>→ Cluster 2: Program</td></tr><tr><td>snapshot_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>audit_data</td><td>jsonb</td><td>NOT NULL</td><td>Full audit result; immutable after creation</td></tr><tr><td>is_graduation_clearance</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>True if used as the canonical graduation clearance</td></tr><tr><td>cleared_by</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>cleared_at</td><td>timestamptz</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="graduationapplication">GraduationApplication<a href="#graduationapplication" class="hash-link" aria-label="Direct link to GraduationApplication" title="Direct link to GraduationApplication" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>program_id</td><td>uuid</td><td>NOT NULL, FK → Program</td><td>→ Cluster 2: Program</td></tr><tr><td>term_id</td><td>uuid</td><td>NOT NULL, FK → Term</td><td>Expected graduation term; → Cluster 3: Term</td></tr><tr><td>applied_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>status</td><td>enum(submitted, under_review, approved, denied, withdrawn)</td><td>NOT NULL, DEFAULT &#x27;submitted&#x27;</td><td></td></tr><tr><td>reviewer_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>reviewed_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>notes</td><td>text</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="ceremony">Ceremony<a href="#ceremony" class="hash-link" aria-label="Direct link to Ceremony" title="Direct link to Ceremony" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>term_id</td><td>uuid</td><td>NOT NULL, FK → Term</td><td>→ Cluster 3: Term</td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td>e.g., <code>Spring 2026 Commencement</code></td></tr><tr><td>ceremony_date</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>location</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>capacity</td><td>integer</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>status</td><td>enum(scheduled, completed, cancelled)</td><td>NOT NULL, DEFAULT &#x27;scheduled&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="commencementregistration">CommencementRegistration<a href="#commencementregistration" class="hash-link" aria-label="Direct link to CommencementRegistration" title="Direct link to CommencementRegistration" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>ceremony_id</td><td>uuid</td><td>NOT NULL, FK → Ceremony</td><td></td></tr><tr><td>registered_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>guest_count</td><td>integer</td><td>NOT NULL, DEFAULT 0, CHECK &gt;= 0</td><td></td></tr><tr><td>accessibility_needs</td><td>text</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(registered, cancelled)</td><td>NOT NULL, DEFAULT &#x27;registered&#x27;</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(student_id, ceremony_id)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="diplomaorder">DiplomaOrder<a href="#diplomaorder" class="hash-link" aria-label="Direct link to DiplomaOrder" title="Direct link to DiplomaOrder" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>graduation_application_id</td><td>uuid</td><td>NOT NULL, FK → GraduationApplication</td><td></td></tr><tr><td>mailing_name</td><td>text</td><td>NOT NULL</td><td>Name printed on diploma</td></tr><tr><td>mailing_address</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>expedited</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td></td></tr><tr><td>fee</td><td>numeric(8,2)</td><td>NOT NULL, DEFAULT 0</td><td></td></tr><tr><td>payment_status</td><td>enum(unpaid, paid, waived)</td><td>NOT NULL, DEFAULT &#x27;unpaid&#x27;</td><td></td></tr><tr><td>ordered_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>shipped_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>tracking_number</td><td>text</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(pending, processing, shipped, delivered)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr></tbody></table>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-6--billing-transfer-credit-documents--communications">Cluster 6 — Billing, Transfer Credit, Documents &amp; Communications<a href="#cluster-6--billing-transfer-credit-documents--communications" class="hash-link" aria-label="Direct link to Cluster 6 — Billing, Transfer Credit, Documents &amp; Communications" title="Direct link to Cluster 6 — Billing, Transfer Credit, Documents &amp; Communications" translate="no">​</a></h3>
<p><strong>Entities:</strong> Charge · Payment · SavedPaymentMethod · FinancialAid · TransferCreditRequest · TransferCreditItem · TransferCreditAppeal · DocumentType · Document · GeneratedDocument · Notification · NotificationPreference · Announcement · SupportTicket · TicketMessage · HelpArticle · ScheduledReport</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">erDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ Charge : &quot;incurs&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ Payment : &quot;makes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ SavedPaymentMethod : &quot;stores&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ FinancialAid : &quot;receives&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ TransferCreditRequest : &quot;submits&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TransferCreditRequest ||--|{ TransferCreditItem : &quot;contains&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TransferCreditItem ||--o{ TransferCreditAppeal : &quot;appealed via&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DocumentType ||--o{ Document : &quot;typed by&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DocumentType ||--o{ GeneratedDocument : &quot;typed by&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Student ||--o{ Document : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ Notification : &quot;receives&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ NotificationPreference : &quot;sets&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ Announcement : &quot;authors&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ SupportTicket : &quot;submits&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SupportTicket ||--|{ TicketMessage : &quot;has&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ HelpArticle : &quot;authors&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User ||--o{ ScheduledReport : &quot;creates&quot;</span><br></span></code></pre></div></div>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="charge">Charge<a href="#charge" class="hash-link" aria-label="Direct link to Charge" title="Direct link to Charge" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>term_id</td><td>uuid</td><td>nullable, FK → Term</td><td>→ Cluster 3: Term; null for non-term charges</td></tr><tr><td>charge_type</td><td>enum(tuition, fee, fine, other)</td><td>NOT NULL</td><td></td></tr><tr><td>description</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>amount</td><td>numeric(10,2)</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>due_date</td><td>date</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(pending, paid, waived, disputed)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="payment">Payment<a href="#payment" class="hash-link" aria-label="Direct link to Payment" title="Direct link to Payment" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>amount</td><td>numeric(10,2)</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>payment_method</td><td>enum(credit_card, ach, check, financial_aid, other)</td><td>NOT NULL</td><td></td></tr><tr><td>payment_date</td><td>date</td><td>NOT NULL</td><td></td></tr><tr><td>reference_number</td><td>text</td><td>nullable</td><td>Gateway or check reference</td></tr><tr><td>status</td><td>enum(pending, completed, failed, refunded)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr><tr><td>applied_charges</td><td>jsonb</td><td>NOT NULL, DEFAULT &#x27;[]&#x27;</td><td>Array of <code>{charge_id, amount_applied}</code></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="savedpaymentmethod">SavedPaymentMethod<a href="#savedpaymentmethod" class="hash-link" aria-label="Direct link to SavedPaymentMethod" title="Direct link to SavedPaymentMethod" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>method_type</td><td>enum(credit_card, ach)</td><td>NOT NULL</td><td></td></tr><tr><td>last_four</td><td>text</td><td>NOT NULL</td><td>Last four digits of card or account number</td></tr><tr><td>card_brand</td><td>text</td><td>nullable</td><td>e.g., <code>Visa</code>, <code>Mastercard</code>; null for ACH</td></tr><tr><td>expiry_month</td><td>integer</td><td>nullable</td><td>1–12; null for ACH</td></tr><tr><td>expiry_year</td><td>integer</td><td>nullable</td><td>Four-digit year; null for ACH</td></tr><tr><td>billing_name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>billing_address</td><td>text</td><td>nullable</td><td></td></tr><tr><td>provider_token</td><td>text</td><td>NOT NULL</td><td>Opaque token from payment gateway; never raw PAN</td></tr><tr><td>is_default</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td></td></tr><tr><td>status</td><td>enum(active, removed)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="financialaid">FinancialAid<a href="#financialaid" class="hash-link" aria-label="Direct link to FinancialAid" title="Direct link to FinancialAid" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>term_id</td><td>uuid</td><td>NOT NULL, FK → Term</td><td>→ Cluster 3: Term</td></tr><tr><td>aid_type</td><td>enum(grant, loan, scholarship, work_study)</td><td>NOT NULL</td><td></td></tr><tr><td>source</td><td>text</td><td>NOT NULL</td><td>e.g., <code>Federal Pell</code>, <code>Institutional Merit</code></td></tr><tr><td>amount_awarded</td><td>numeric(10,2)</td><td>NOT NULL, CHECK &gt;= 0</td><td></td></tr><tr><td>amount_disbursed</td><td>numeric(10,2)</td><td>NOT NULL, DEFAULT 0, CHECK &gt;= 0</td><td></td></tr><tr><td>disbursement_date</td><td>date</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(pending, disbursed, cancelled)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="transfercreditrequest">TransferCreditRequest<a href="#transfercreditrequest" class="hash-link" aria-label="Direct link to TransferCreditRequest" title="Direct link to TransferCreditRequest" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>institution_name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>institution_country</td><td>text</td><td>NOT NULL, DEFAULT &#x27;US&#x27;</td><td>ISO 3166-1 alpha-2</td></tr><tr><td>submitted_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>reviewer_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>reviewed_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(submitted, under_review, approved, partially_approved, denied)</td><td>NOT NULL, DEFAULT &#x27;submitted&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="transfercredititem">TransferCreditItem<a href="#transfercredititem" class="hash-link" aria-label="Direct link to TransferCreditItem" title="Direct link to TransferCreditItem" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>request_id</td><td>uuid</td><td>NOT NULL, FK → TransferCreditRequest</td><td></td></tr><tr><td>external_course_code</td><td>text</td><td>NOT NULL</td><td>Course code at the external institution</td></tr><tr><td>external_course_title</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>external_credits</td><td>numeric(4,2)</td><td>NOT NULL, CHECK &gt; 0</td><td></td></tr><tr><td>external_grade</td><td>text</td><td>nullable</td><td></td></tr><tr><td>equivalent_course_id</td><td>uuid</td><td>nullable, FK → Course</td><td>→ Cluster 2: Course</td></tr><tr><td>credits_granted</td><td>numeric(4,2)</td><td>nullable</td><td>Credits accepted; null until a decision is made</td></tr><tr><td>decision</td><td>enum(accepted, rejected, pending)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr><tr><td>decision_notes</td><td>text</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="transfercreditappeal">TransferCreditAppeal<a href="#transfercreditappeal" class="hash-link" aria-label="Direct link to TransferCreditAppeal" title="Direct link to TransferCreditAppeal" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>item_id</td><td>uuid</td><td>NOT NULL, FK → TransferCreditItem</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>NOT NULL, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>reason</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>submitted_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>reviewer_user_id</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>reviewed_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(submitted, under_review, approved, denied)</td><td>NOT NULL, DEFAULT &#x27;submitted&#x27;</td><td></td></tr><tr><td>outcome_notes</td><td>text</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="documenttype">DocumentType<a href="#documenttype" class="hash-link" aria-label="Direct link to DocumentType" title="Direct link to DocumentType" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL, UNIQUE</td><td>e.g., <code>Official Transcript</code></td></tr><tr><td>code</td><td>text</td><td>NOT NULL, UNIQUE</td><td>e.g., <code>OFFICIAL_TRANSCRIPT</code></td></tr><tr><td>description</td><td>text</td><td>nullable</td><td></td></tr><tr><td>retention_years</td><td>integer</td><td>NOT NULL</td><td>Minimum years to retain per policy</td></tr><tr><td>requires_staff_review</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>Whether uploaded documents need staff review</td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="document">Document<a href="#document" class="hash-link" aria-label="Direct link to Document" title="Direct link to Document" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>nullable, FK → Student</td><td>→ Cluster 4: Student; null for institution-level docs</td></tr><tr><td>document_type_id</td><td>uuid</td><td>NOT NULL, FK → DocumentType</td><td></td></tr><tr><td>uploaded_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>file_name</td><td>text</td><td>NOT NULL</td><td>Original filename</td></tr><tr><td>file_size</td><td>integer</td><td>NOT NULL</td><td>Bytes</td></tr><tr><td>mime_type</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>storage_key</td><td>text</td><td>NOT NULL, UNIQUE</td><td>Object-storage key; never exposed directly</td></tr><tr><td>status</td><td>enum(pending, under_review, accepted, rejected)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr><tr><td>reviewed_by</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>reviewed_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>review_notes</td><td>text</td><td>nullable</td><td></td></tr><tr><td>expires_at</td><td>timestamptz</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="generateddocument">GeneratedDocument<a href="#generateddocument" class="hash-link" aria-label="Direct link to GeneratedDocument" title="Direct link to GeneratedDocument" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>student_id</td><td>uuid</td><td>nullable, FK → Student</td><td>→ Cluster 4: Student</td></tr><tr><td>document_type_id</td><td>uuid</td><td>NOT NULL, FK → DocumentType</td><td></td></tr><tr><td>generated_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>template_version</td><td>text</td><td>NOT NULL</td><td>Version of the document template used</td></tr><tr><td>file_name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>storage_key</td><td>text</td><td>NOT NULL, UNIQUE</td><td></td></tr><tr><td>generated_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr><tr><td>expires_at</td><td>timestamptz</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="notification">Notification<a href="#notification" class="hash-link" aria-label="Direct link to Notification" title="Direct link to Notification" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>channel</td><td>enum(email, sms, in_app)</td><td>NOT NULL</td><td></td></tr><tr><td>event_type</td><td>text</td><td>NOT NULL</td><td>e.g., <code>enrollment.confirmed</code>, <code>waitlist.offered</code></td></tr><tr><td>subject</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>body</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>sent_at</td><td>timestamptz</td><td>nullable</td><td>Null if pending</td></tr><tr><td>read_at</td><td>timestamptz</td><td>nullable</td><td>In-app channel only</td></tr><tr><td>status</td><td>enum(pending, sent, failed, read)</td><td>NOT NULL, DEFAULT &#x27;pending&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="notificationpreference">NotificationPreference<a href="#notificationpreference" class="hash-link" aria-label="Direct link to NotificationPreference" title="Direct link to NotificationPreference" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>event_type</td><td>text</td><td>NOT NULL</td><td>Matches Notification.event_type</td></tr><tr><td>channel</td><td>enum(email, sms, in_app)</td><td>NOT NULL</td><td></td></tr><tr><td>is_enabled</td><td>boolean</td><td>NOT NULL, DEFAULT true</td><td></td></tr></tbody></table>
<blockquote>
<p>Unique constraint on <code>(user_id, event_type, channel)</code>.</p>
</blockquote>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="announcement">Announcement<a href="#announcement" class="hash-link" aria-label="Direct link to Announcement" title="Direct link to Announcement" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>created_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>title</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>body</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>audience_role</td><td>enum(all, student, instructor, advisor, academic_staff, registrar, administrator)</td><td>NOT NULL, DEFAULT &#x27;all&#x27;</td><td></td></tr><tr><td>target_program_id</td><td>uuid</td><td>nullable, FK → Program</td><td>→ Cluster 2: Program; null = all programs</td></tr><tr><td>publish_at</td><td>timestamptz</td><td>NOT NULL</td><td></td></tr><tr><td>expires_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(draft, published, archived)</td><td>NOT NULL, DEFAULT &#x27;draft&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="supportticket">SupportTicket<a href="#supportticket" class="hash-link" aria-label="Direct link to SupportTicket" title="Direct link to SupportTicket" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>submitted_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>assigned_to</td><td>uuid</td><td>nullable, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>subject</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>category</td><td>text</td><td>NOT NULL</td><td>e.g., <code>billing</code>, <code>registration</code>, <code>technical</code></td></tr><tr><td>priority</td><td>enum(low, medium, high, urgent)</td><td>NOT NULL, DEFAULT &#x27;medium&#x27;</td><td></td></tr><tr><td>status</td><td>enum(open, in_progress, waiting_on_user, resolved, closed)</td><td>NOT NULL, DEFAULT &#x27;open&#x27;</td><td></td></tr><tr><td>resolved_at</td><td>timestamptz</td><td>nullable</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="ticketmessage">TicketMessage<a href="#ticketmessage" class="hash-link" aria-label="Direct link to TicketMessage" title="Direct link to TicketMessage" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>ticket_id</td><td>uuid</td><td>NOT NULL, FK → SupportTicket</td><td></td></tr><tr><td>author_user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>body</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>is_internal</td><td>boolean</td><td>NOT NULL, DEFAULT false</td><td>Internal notes not visible to the submitter</td></tr><tr><td>sent_at</td><td>timestamptz</td><td>NOT NULL, DEFAULT now()</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="helparticle">HelpArticle<a href="#helparticle" class="hash-link" aria-label="Direct link to HelpArticle" title="Direct link to HelpArticle" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>title</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>slug</td><td>text</td><td>NOT NULL, UNIQUE</td><td>URL-safe identifier</td></tr><tr><td>category</td><td>text</td><td>NOT NULL</td><td>e.g., <code>registration</code>, <code>billing</code></td></tr><tr><td>body</td><td>text</td><td>NOT NULL</td><td>Markdown content</td></tr><tr><td>author_user_id</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>published_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>status</td><td>enum(draft, published, archived)</td><td>NOT NULL, DEFAULT &#x27;draft&#x27;</td><td></td></tr></tbody></table>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="scheduledreport">ScheduledReport<a href="#scheduledreport" class="hash-link" aria-label="Direct link to ScheduledReport" title="Direct link to ScheduledReport" translate="no">​</a></h4>
<table><thead><tr><th>Attribute</th><th>Type</th><th>Constraints</th><th>Notes</th></tr></thead><tbody><tr><td>id</td><td>uuid</td><td>PK</td><td></td></tr><tr><td>name</td><td>text</td><td>NOT NULL</td><td></td></tr><tr><td>report_type</td><td>text</td><td>NOT NULL</td><td>e.g., <code>enrollment_summary</code>, <code>grade_distribution</code></td></tr><tr><td>created_by</td><td>uuid</td><td>NOT NULL, FK → User</td><td>→ Cluster 1: User</td></tr><tr><td>recipient_emails</td><td>text[]</td><td>NOT NULL, DEFAULT &#x27;<!-- -->&#x27;</td><td></td></tr><tr><td>schedule_cron</td><td>text</td><td>NOT NULL</td><td>Cron expression</td></tr><tr><td>last_run_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>next_run_at</td><td>timestamptz</td><td>nullable</td><td></td></tr><tr><td>format</td><td>enum(csv, pdf, xlsx)</td><td>NOT NULL, DEFAULT &#x27;csv&#x27;</td><td></td></tr><tr><td>parameters</td><td>jsonb</td><td>NOT NULL, DEFAULT &#x27;<!-- -->&#x27;</td><td>Report-specific filter and option values</td></tr><tr><td>status</td><td>enum(active, paused)</td><td>NOT NULL, DEFAULT &#x27;active&#x27;</td><td></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-key-design-decisions">4. Key Design Decisions<a href="#4-key-design-decisions" class="hash-link" aria-label="Direct link to 4. Key Design Decisions" title="Direct link to 4. Key Design Decisions" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="single-table-user-with-joined-table-inheritance-for-student">Single-Table User with Joined-Table Inheritance for Student<a href="#single-table-user-with-joined-table-inheritance-for-student" class="hash-link" aria-label="Direct link to Single-Table User with Joined-Table Inheritance for Student" title="Direct link to Single-Table User with Joined-Table Inheritance for Student" translate="no">​</a></h3>
<p>All human principals share the <code>User</code> table and authenticate with a single credential. The <code>role</code> column determines permissions (RBAC enforced at the application layer). <code>Student</code> is a separate profile table whose <code>id</code> is a FK to <code>User.id</code> (joined-table inheritance pattern). This avoids multi-table polymorphism while keeping the student&#x27;s extended profile separate from authentication concerns.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="grade-on-enrollment-gradecorrection-as-audit-trail">Grade on Enrollment; GradeCorrection as Audit Trail<a href="#grade-on-enrollment-gradecorrection-as-audit-trail" class="hash-link" aria-label="Direct link to Grade on Enrollment; GradeCorrection as Audit Trail" title="Direct link to Grade on Enrollment; GradeCorrection as Audit Trail" translate="no">​</a></h3>
<p><code>Enrollment.grade</code> holds the current authoritative grade. Any post-submission change creates a <code>GradeCorrection</code> record (an immutable audit entry), preserving the original grade and documenting who submitted and who approved the change. This satisfies FERPA audit requirements without destroying history.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="application-managed-waitlist-position">Application-Managed Waitlist Position<a href="#application-managed-waitlist-position" class="hash-link" aria-label="Direct link to Application-Managed Waitlist Position" title="Direct link to Application-Managed Waitlist Position" translate="no">​</a></h3>
<p><code>Waitlist.position</code> is an integer maintained by the application — not a DB sequence. The DB enforces <code>UNIQUE (student_id, section_id)</code> to prevent duplicate entries. When a student leaves the waitlist, the application re-numbers positions in a single transaction. This keeps logic simple while supporting configurable priority rules (e.g., reserved-seat priority).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="immutable-degreeauditsnapshot-json-blob">Immutable DegreeAuditSnapshot JSON Blob<a href="#immutable-degreeauditsnapshot-json-blob" class="hash-link" aria-label="Direct link to Immutable DegreeAuditSnapshot JSON Blob" title="Direct link to Immutable DegreeAuditSnapshot JSON Blob" translate="no">​</a></h3>
<p><code>DegreeAuditSnapshot.audit_data</code> stores the full audit result as <code>jsonb</code> at the moment of graduation clearance. This prevents retroactive curriculum changes from invalidating an approved graduation. The snapshot is written once and never mutated; <code>is_graduation_clearance = true</code> marks the canonical clearance snapshot.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="optimistic-concurrency-for-section-enrollment">Optimistic Concurrency for Section Enrollment<a href="#optimistic-concurrency-for-section-enrollment" class="hash-link" aria-label="Direct link to Optimistic Concurrency for Section Enrollment" title="Direct link to Optimistic Concurrency for Section Enrollment" translate="no">​</a></h3>
<p>Section capacity enforcement (<code>Section.capacity</code> vs. <code>enrolled_count</code>) requires a concurrency-safe check during peak registration. The recommended approach is <code>INSERT INTO Enrollment … RETURNING id</code> combined with a DB <code>CHECK</code> constraint or trigger that validates <code>enrolled_count &lt; capacity</code> on the Section row. An alternative is <code>SELECT … FOR UPDATE</code> on the Section row, which provides stronger guarantees at the cost of higher lock contention.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="calculated-gpa-and-credit-hours">Calculated GPA and Credit Hours<a href="#calculated-gpa-and-credit-hours" class="hash-link" aria-label="Direct link to Calculated GPA and Credit Hours" title="Direct link to Calculated GPA and Credit Hours" translate="no">​</a></h3>
<p><code>Student.cumulative_gpa</code> and <code>Student.total_credit_hours_completed</code> are marked <code>[calculated]</code>. The recommended implementation is a <strong>PostgreSQL materialized view</strong> refreshed on <code>INSERT/UPDATE</code> to <code>Enrollment</code>, or a trigger that recalculates on grade posting. These values must not be manually writeable columns to avoid inconsistency with the underlying Enrollment records.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="field-level-diff-in-coursechangehistory">Field-Level Diff in CourseChangeHistory<a href="#field-level-diff-in-coursechangehistory" class="hash-link" aria-label="Direct link to Field-Level Diff in CourseChangeHistory" title="Direct link to Field-Level Diff in CourseChangeHistory" translate="no">​</a></h3>
<p><code>CourseChangeHistory</code> stores one row per changed field (<code>field_name</code>, <code>old_value</code>, <code>new_value</code> as text). This is easy to implement, query, and test. An alternative is a single JSON-patch blob per change event, which is more compact but requires JSON functions for querying. The current row-per-field design is preferred for readability and compatibility with standard test automation tools.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="payment-gateway-token-storage">Payment Gateway Token Storage<a href="#payment-gateway-token-storage" class="hash-link" aria-label="Direct link to Payment Gateway Token Storage" title="Direct link to Payment Gateway Token Storage" translate="no">​</a></h3>
<p><code>SavedPaymentMethod.provider_token</code> stores only the opaque token returned by the payment gateway (e.g., Stripe, Braintree). Raw card numbers (PAN) are never stored in, transmitted through, or logged by the application tier. This design keeps the system out of PCI DSS scope for card data storage and reduces breach impact.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/Curriculab/docs/edit/main/architecture/data-model.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-19T04:17:27.000Z" itemprop="dateModified">Feb 19, 2026</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/docs/architecture/non-functional-requirements"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Non-Functional Requirements</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-conventions" class="table-of-contents__link toc-highlight">1. Conventions</a></li><li><a href="#2-domain-overview" class="table-of-contents__link toc-highlight">2. Domain Overview</a></li><li><a href="#3-entity-catalog" class="table-of-contents__link toc-highlight">3. Entity Catalog</a><ul><li><a href="#cluster-1--identity--access" class="table-of-contents__link toc-highlight">Cluster 1 — Identity &amp; Access</a></li><li><a href="#cluster-2--organizational-structure--curriculum" class="table-of-contents__link toc-highlight">Cluster 2 — Organizational Structure &amp; Curriculum</a></li><li><a href="#cluster-3--academic-calendar--scheduling" class="table-of-contents__link toc-highlight">Cluster 3 — Academic Calendar &amp; Scheduling</a></li><li><a href="#cluster-4--student-profile--registration" class="table-of-contents__link toc-highlight">Cluster 4 — Student Profile &amp; Registration</a></li><li><a href="#cluster-5--advising-records--graduation" class="table-of-contents__link toc-highlight">Cluster 5 — Advising, Records &amp; Graduation</a></li><li><a href="#cluster-6--billing-transfer-credit-documents--communications" class="table-of-contents__link toc-highlight">Cluster 6 — Billing, Transfer Credit, Documents &amp; Communications</a></li></ul></li><li><a href="#4-key-design-decisions" class="table-of-contents__link toc-highlight">4. Key Design Decisions</a><ul><li><a href="#single-table-user-with-joined-table-inheritance-for-student" class="table-of-contents__link toc-highlight">Single-Table User with Joined-Table Inheritance for Student</a></li><li><a href="#grade-on-enrollment-gradecorrection-as-audit-trail" class="table-of-contents__link toc-highlight">Grade on Enrollment; GradeCorrection as Audit Trail</a></li><li><a href="#application-managed-waitlist-position" class="table-of-contents__link toc-highlight">Application-Managed Waitlist Position</a></li><li><a href="#immutable-degreeauditsnapshot-json-blob" class="table-of-contents__link toc-highlight">Immutable DegreeAuditSnapshot JSON Blob</a></li><li><a href="#optimistic-concurrency-for-section-enrollment" class="table-of-contents__link toc-highlight">Optimistic Concurrency for Section Enrollment</a></li><li><a href="#calculated-gpa-and-credit-hours" class="table-of-contents__link toc-highlight">Calculated GPA and Credit Hours</a></li><li><a href="#field-level-diff-in-coursechangehistory" class="table-of-contents__link toc-highlight">Field-Level Diff in CourseChangeHistory</a></li><li><a href="#payment-gateway-token-storage" class="table-of-contents__link toc-highlight">Payment Gateway Token Storage</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/requirements/">Requirements</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/architecture/data-model">Architecture</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/planning/story-map">Planning</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/decisions/">ADRs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Curriculab" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Org<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Curriculab. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>