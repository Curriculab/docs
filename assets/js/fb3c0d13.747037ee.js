"use strict";(globalThis.webpackChunkcurriculab_docs=globalThis.webpackChunkcurriculab_docs||[]).push([[349],{3726(e,d,t){t.r(d),t.d(d,{assets:()=>c,contentTitle:()=>l,default:()=>j,frontMatter:()=>i,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"architecture/data-model","title":"Data Model","description":"Status: Living document \u2014 update whenever entities or attributes change.","source":"@site/architecture/data-model.md","sourceDirName":"architecture","slug":"/architecture/data-model","permalink":"/docs/architecture/data-model","draft":false,"unlisted":false,"editUrl":"https://github.com/Curriculab/docs/edit/main/architecture/data-model.md","tags":[],"version":"current","lastUpdatedAt":1771474647000,"frontMatter":{},"sidebar":"architectureSidebar","next":{"title":"Non-Functional Requirements","permalink":"/docs/architecture/non-functional-requirements"}}');var r=t(4848),n=t(8453);const i={},l="Data Model",c={},h=[{value:"1. Conventions",id:"1-conventions",level:2},{value:"2. Domain Overview",id:"2-domain-overview",level:2},{value:"3. Entity Catalog",id:"3-entity-catalog",level:2},{value:"Cluster 1 \u2014 Identity &amp; Access",id:"cluster-1--identity--access",level:3},{value:"User",id:"user",level:4},{value:"Session",id:"session",level:4},{value:"TwoFactorEnrollment",id:"twofactorenrollment",level:4},{value:"PasswordResetToken",id:"passwordresettoken",level:4},{value:"AuditLog",id:"auditlog",level:4},{value:"ApiConsumer",id:"apiconsumer",level:4},{value:"Cluster 2 \u2014 Organizational Structure &amp; Curriculum",id:"cluster-2--organizational-structure--curriculum",level:3},{value:"College",id:"college",level:4},{value:"Department",id:"department",level:4},{value:"Building",id:"building",level:4},{value:"Room",id:"room",level:4},{value:"RoomBlock",id:"roomblock",level:4},{value:"Program",id:"program",level:4},{value:"RequirementCategory",id:"requirementcategory",level:4},{value:"RequirementSlot",id:"requirementslot",level:4},{value:"Course",id:"course",level:4},{value:"CoursePrerequisite",id:"courseprerequisite",level:4},{value:"Cluster 3 \u2014 Academic Calendar &amp; Scheduling",id:"cluster-3--academic-calendar--scheduling",level:3},{value:"Term",id:"term",level:4},{value:"ProgramDeadline",id:"programdeadline",level:4},{value:"Section",id:"section",level:4},{value:"SectionMeetingTime",id:"sectionmeetingtime",level:4},{value:"ReservedSeatGroup",id:"reservedseatgroup",level:4},{value:"Cluster 4 \u2014 Student Profile &amp; Registration",id:"cluster-4--student-profile--registration",level:3},{value:"Student",id:"student",level:4},{value:"EmergencyContact",id:"emergencycontact",level:4},{value:"StudentProgram",id:"studentprogram",level:4},{value:"Enrollment",id:"enrollment",level:4},{value:"GradeCorrection",id:"gradecorrection",level:4},{value:"Waitlist",id:"waitlist",level:4},{value:"Hold",id:"hold",level:4},{value:"CourseChangeHistory",id:"coursechangehistory",level:4},{value:"Cluster 5 \u2014 Advising, Records &amp; Graduation",id:"cluster-5--advising-records--graduation",level:3},{value:"AdvisorAssignment",id:"advisorassignment",level:4},{value:"AdvisingAppointment",id:"advisingappointment",level:4},{value:"AdvisingNote",id:"advisingnote",level:4},{value:"AcademicPlan",id:"academicplan",level:4},{value:"AcademicPlanEntry",id:"academicplanentry",level:4},{value:"TranscriptRequest",id:"transcriptrequest",level:4},{value:"DegreeAuditSnapshot",id:"degreeauditsnapshot",level:4},{value:"GraduationApplication",id:"graduationapplication",level:4},{value:"Ceremony",id:"ceremony",level:4},{value:"CommencementRegistration",id:"commencementregistration",level:4},{value:"DiplomaOrder",id:"diplomaorder",level:4},{value:"Cluster 6 \u2014 Billing, Transfer Credit, Documents &amp; Communications",id:"cluster-6--billing-transfer-credit-documents--communications",level:3},{value:"Charge",id:"charge",level:4},{value:"Payment",id:"payment",level:4},{value:"SavedPaymentMethod",id:"savedpaymentmethod",level:4},{value:"FinancialAid",id:"financialaid",level:4},{value:"TransferCreditRequest",id:"transfercreditrequest",level:4},{value:"TransferCreditItem",id:"transfercredititem",level:4},{value:"TransferCreditAppeal",id:"transfercreditappeal",level:4},{value:"DocumentType",id:"documenttype",level:4},{value:"Document",id:"document",level:4},{value:"GeneratedDocument",id:"generateddocument",level:4},{value:"Notification",id:"notification",level:4},{value:"NotificationPreference",id:"notificationpreference",level:4},{value:"Announcement",id:"announcement",level:4},{value:"SupportTicket",id:"supportticket",level:4},{value:"TicketMessage",id:"ticketmessage",level:4},{value:"HelpArticle",id:"helparticle",level:4},{value:"ScheduledReport",id:"scheduledreport",level:4},{value:"4. Key Design Decisions",id:"4-key-design-decisions",level:2},{value:"Single-Table User with Joined-Table Inheritance for Student",id:"single-table-user-with-joined-table-inheritance-for-student",level:3},{value:"Grade on Enrollment; GradeCorrection as Audit Trail",id:"grade-on-enrollment-gradecorrection-as-audit-trail",level:3},{value:"Application-Managed Waitlist Position",id:"application-managed-waitlist-position",level:3},{value:"Immutable DegreeAuditSnapshot JSON Blob",id:"immutable-degreeauditsnapshot-json-blob",level:3},{value:"Optimistic Concurrency for Section Enrollment",id:"optimistic-concurrency-for-section-enrollment",level:3},{value:"Calculated GPA and Credit Hours",id:"calculated-gpa-and-credit-hours",level:3},{value:"Field-Level Diff in CourseChangeHistory",id:"field-level-diff-in-coursechangehistory",level:3},{value:"Payment Gateway Token Storage",id:"payment-gateway-token-storage",level:3}];function x(e){const d={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.header,{children:(0,r.jsx)(d.h1,{id:"data-model",children:"Data Model"})}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Status:"})," Living document \u2014 update whenever entities or attributes change.\n",(0,r.jsx)(d.strong,{children:"Last updated:"})," 2026-02-18"]}),"\n"]}),"\n",(0,r.jsxs)(d.p,{children:["This document defines the canonical entity model for ",(0,r.jsx)(d.strong,{children:"Curriculab"}),". It is the authoritative reference for database schema design, API contract design, and code generation."]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"1-conventions",children:"1. Conventions"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Convention"}),(0,r.jsx)(d.th,{children:"Rule"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Primary keys"})}),(0,r.jsxs)(d.td,{children:["All PKs are ",(0,r.jsx)(d.code,{children:"uuid"})," (v4) unless noted"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Timestamps"})}),(0,r.jsxs)(d.td,{children:["All timestamps are ",(0,r.jsx)(d.code,{children:"timestamptz"})," stored in UTC"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Implied columns"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"created_at timestamptz NOT NULL DEFAULT now()"})," and ",(0,r.jsx)(d.code,{children:"updated_at timestamptz NOT NULL DEFAULT now()"})," are present on every entity and omitted from entity tables to reduce noise"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Naming"})}),(0,r.jsxs)(d.td,{children:["Attributes use ",(0,r.jsx)(d.code,{children:"snake_case"}),"; entity names use ",(0,r.jsx)(d.code,{children:"PascalCase"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Soft deletes"})}),(0,r.jsxs)(d.td,{children:["Entities use a ",(0,r.jsx)(d.code,{children:"status"})," enum (e.g., ",(0,r.jsx)(d.code,{children:"active"}),"/",(0,r.jsx)(d.code,{children:"inactive"}),"/",(0,r.jsx)(d.code,{children:"archived"}),") rather than physical deletion"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Calculated fields"})}),(0,r.jsxs)(d.td,{children:["Fields marked ",(0,r.jsx)(d.code,{children:"[calculated]"})," are derived at the application layer or via a DB trigger/materialized view; they are not raw stored columns unless noted"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Enums"})}),(0,r.jsxs)(d.td,{children:["Inline as ",(0,r.jsx)(d.code,{children:"enum(val1, val2, \u2026)"})," in the Type column"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Arrays"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"text[]"})," denotes a PostgreSQL array of strings"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"JSON blobs"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"jsonb"})," for semi-structured or variable-shape data"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.strong,{children:"Cross-cluster FKs"})}),(0,r.jsxs)(d.td,{children:["Shown in entity tables with a cluster reference in the Notes column (e.g., ",(0,r.jsx)(d.em,{children:"\u2192 Cluster 1: User"}),")"]})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"2-domain-overview",children:"2. Domain Overview"}),"\n",(0,r.jsxs)(d.p,{children:["The six domain clusters and their primary dependency arrows. Arrows point from the cluster that is ",(0,r.jsx)(d.em,{children:"depended on"})," to the cluster that ",(0,r.jsx)(d.em,{children:"depends on it"}),"."]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'flowchart TD\n    IA["**Cluster 1**\\nIdentity & Access\\n_(User, Session, \u2026)_"]\n    OS["**Cluster 2**\\nOrganizational Structure\\n& Curriculum\\n_(College, Department, Course, \u2026)_"]\n    AC["**Cluster 3**\\nAcademic Calendar\\n& Scheduling\\n_(Term, Section, \u2026)_"]\n    SP["**Cluster 4**\\nStudent Profile\\n& Registration\\n_(Student, Enrollment, \u2026)_"]\n    AR["**Cluster 5**\\nAdvising, Records\\n& Graduation\\n_(AdvisorAssignment, Transcript, \u2026)_"]\n    BL["**Cluster 6**\\nBilling, Transfer Credit,\\nDocuments & Communications\\n_(Charge, Payment, Notification, \u2026)_"]\n\n    IA --\x3e OS\n    IA --\x3e AC\n    IA --\x3e SP\n    OS --\x3e AC\n    OS --\x3e SP\n    OS --\x3e AR\n    AC --\x3e SP\n    SP --\x3e AR\n    SP --\x3e BL\n    AR --\x3e BL\n    IA --\x3e BL\n    OS --\x3e BL\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"3-entity-catalog",children:"3. Entity Catalog"}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h3,{id:"cluster-1--identity--access",children:"Cluster 1 \u2014 Identity & Access"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Entities:"})," User \xb7 Session \xb7 TwoFactorEnrollment \xb7 PasswordResetToken \xb7 AuditLog \xb7 ApiConsumer"]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'erDiagram\n    User ||--o{ Session : "has"\n    User ||--o| TwoFactorEnrollment : "enrolls in"\n    User ||--o{ PasswordResetToken : "requests"\n    User ||--o{ AuditLog : "generates"\n    User ||--o{ ApiConsumer : "owns"\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"user",children:"User"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"email"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"password_hash"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Null for SSO-only accounts"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"role"}),(0,r.jsx)(d.td,{children:"enum(student, instructor, advisor, academic_staff, registrar, administrator)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Single role per user; RBAC enforced at application layer"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, inactive, suspended, pending)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"first_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"last_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"phone"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"sso_provider"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"google"}),", ",(0,r.jsx)(d.code,{children:"saml"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"sso_subject"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"External identity provider subject ID"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"last_login_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"session",children:"Session"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"token_hash"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{children:"SHA-256 of the bearer token"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"ip_address"}),(0,r.jsx)(d.td,{children:"inet"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_agent"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expires_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"revoked_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Null while active"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"twofactorenrollment",children:"TwoFactorEnrollment"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User, UNIQUE"}),(0,r.jsx)(d.td,{children:"One enrollment per user"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"method"}),(0,r.jsx)(d.td,{children:"enum(totp, sms, email)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"secret_encrypted"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"AES-256 encrypted TOTP secret or phone/email"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"phone"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Required when method = sms"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"verified"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"enrolled_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Set when verified = true"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"passwordresettoken",children:"PasswordResetToken"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"token_hash"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{children:"SHA-256 of the one-time token"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expires_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"used_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Null until redeemed"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"auditlog",children:"AuditLog"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"Null for system-generated events"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"action"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"user.login"}),", ",(0,r.jsx)(d.code,{children:"enrollment.create"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"entity_type"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Enrollment"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"entity_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"PK of the affected record"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"ip_address"}),(0,r.jsx)(d.td,{children:"inet"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_agent"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"metadata"}),(0,r.jsx)(d.td,{children:"jsonb"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Additional context (old/new values, request body, etc.)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"occurred_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{children:"Dedicated field; complements created_at"})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsx)(d.p,{children:"AuditLog is append-only \u2014 no updates or deletes permitted."}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"apiconsumer",children:"ApiConsumer"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Human-readable label for the consumer"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"client_id"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{children:"OAuth 2.0 client identifier"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"client_secret_hash"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Bcrypt hash of the client secret"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"scopes"}),(0,r.jsx)(d.td,{children:"text[]"}),(0,r.jsxs)(d.td,{children:["NOT NULL, DEFAULT '","'"]}),(0,r.jsx)(d.td,{children:"Allowed OAuth scopes"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"owner_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"Staff member responsible for this consumer"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, revoked)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h3,{id:"cluster-2--organizational-structure--curriculum",children:"Cluster 2 \u2014 Organizational Structure & Curriculum"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Entities:"})," College \xb7 Department \xb7 Building \xb7 Room \xb7 RoomBlock \xb7 Program \xb7 RequirementCategory \xb7 RequirementSlot \xb7 Course \xb7 CoursePrerequisite"]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'erDiagram\n    College ||--|{ Department : "contains"\n    Department ||--o{ Program : "offers"\n    Department ||--o{ Course : "owns"\n    Program ||--|{ RequirementCategory : "has"\n    RequirementCategory ||--|{ RequirementSlot : "contains"\n    RequirementSlot }o--o| Course : "maps to"\n    Course ||--o{ CoursePrerequisite : "requires"\n    CoursePrerequisite }o--|| Course : "is prerequisite for"\n    Building ||--|{ Room : "contains"\n    Room ||--o{ RoomBlock : "blocked by"\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"college",children:"College"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"ENG"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"dean_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, inactive)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"department",children:"Department"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"college_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 College"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"CS"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"chair_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, inactive)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"building",children:"Building"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"SCI"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"address"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"campus"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"For multi-campus institutions"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"room",children:"Room"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"building_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Building"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"room_number"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"capacity"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"room_type"}),(0,r.jsx)(d.td,{children:"enum(classroom, lab, lecture_hall, seminar, other)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"features"}),(0,r.jsx)(d.td,{children:"text[]"}),(0,r.jsxs)(d.td,{children:["NOT NULL, DEFAULT '","'"]}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"['projector','whiteboard']"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, inactive)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(building_id, room_number)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"roomblock",children:"RoomBlock"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"room_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Room"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"start_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"end_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"CHECK end_at > start_at"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reason"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"created_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"program",children:"Program"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"department_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Department"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"CS-BS"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"degree_type"}),(0,r.jsx)(d.td,{children:"enum(certificate, associate, bachelor, master, doctoral)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"catalog_year"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Four-digit year"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"total_credits_required"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, inactive, retired)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(code, catalog_year)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"requirementcategory",children:"RequirementCategory"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"program_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Program"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Core Requirements"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"min_credits"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"max_credits"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Null = no upper limit"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"sort_order"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0"}),(0,r.jsx)(d.td,{children:"Display ordering"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"requirementslot",children:"RequirementSlot"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"category_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 RequirementCategory"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"course_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Course"}),(0,r.jsx)(d.td,{children:"Null when is_elective = true"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_elective"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"Elective slots have no fixed course"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"min_grade"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"C"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"notes"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"course",children:"Course"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"department_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Department"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"CS101"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"title"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"credits"}),(0,r.jsx)(d.td,{children:"numeric(4,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"description"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"delivery_mode"}),(0,r.jsx)(d.td,{children:"enum(in_person, online, hybrid)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'in_person'"}),(0,r.jsx)(d.td,{children:"Default mode; sections may override"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, inactive, retired)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(department_id, code)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"courseprerequisite",children:"CoursePrerequisite"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"course_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Course"}),(0,r.jsx)(d.td,{children:"The course that has this prerequisite"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"prerequisite_course_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Course"}),(0,r.jsx)(d.td,{children:"The required prior course"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"min_grade"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Minimum passing grade required"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_concurrent_allowed"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"True = co-requisite (may be taken simultaneously)"})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(course_id, prerequisite_course_id)"}),". CHECK ",(0,r.jsx)(d.code,{children:"course_id <> prerequisite_course_id"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h3,{id:"cluster-3--academic-calendar--scheduling",children:"Cluster 3 \u2014 Academic Calendar & Scheduling"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Entities:"})," Term \xb7 ProgramDeadline \xb7 Section \xb7 SectionMeetingTime \xb7 ReservedSeatGroup"]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'erDiagram\n    Term ||--o{ ProgramDeadline : "has"\n    Term ||--o{ Section : "hosts"\n    Section ||--o{ SectionMeetingTime : "meets at"\n    Section ||--o{ ReservedSeatGroup : "reserves seats via"\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"term",children:"Term"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Fall 2026"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"2026FA"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"academic_year"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"2026"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_type"}),(0,r.jsx)(d.td,{children:"enum(fall, spring, summer, winter)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"start_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"end_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"CHECK end_date > start_date"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"registration_open_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"registration_close_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"add_drop_deadline"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"withdrawal_deadline"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"grade_submission_deadline"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(upcoming, active, closed, archived)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'upcoming'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"programdeadline",children:"ProgramDeadline"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Term"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"program_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Program"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Program; null = applies to all programs"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"deadline_type"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"graduation_application"}),", ",(0,r.jsx)(d.code,{children:"add_drop"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"deadline_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"notes"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"section",children:"Section"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"course_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Course"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Course"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Term"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"section_number"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"001"}),", ",(0,r.jsx)(d.code,{children:"002"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"instructor_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"room_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Room"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Room"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"delivery_mode"}),(0,r.jsx)(d.td,{children:"enum(in_person, online, hybrid)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Overrides course-level default"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"capacity"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"enrolled_count"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"[calculated]"}),(0,r.jsx)(d.td,{children:"Derived from active Enrollments"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"waitlist_count"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"[calculated]"}),(0,r.jsx)(d.td,{children:"Derived from active Waitlist entries"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(open, closed, cancelled, waitlist_only)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'open'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(course_id, term_id, section_number)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"sectionmeetingtime",children:"SectionMeetingTime"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"section_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Section"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"day_of_week"}),(0,r.jsx)(d.td,{children:"enum(mon, tue, wed, thu, fri, sat, sun)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"start_time"}),(0,r.jsx)(d.td,{children:"time"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Time-of-day without date"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"end_time"}),(0,r.jsx)(d.td,{children:"time"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"CHECK end_time > start_time"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"reservedseatgroup",children:"ReservedSeatGroup"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"section_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Section"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Honors Students"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"seats_reserved"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"criteria"}),(0,r.jsx)(d.td,{children:"jsonb"}),(0,r.jsxs)(d.td,{children:["NOT NULL, DEFAULT '","'"]}),(0,r.jsx)(d.td,{children:"Eligibility rules (e.g., program, standing)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"priority_order"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0"}),(0,r.jsx)(d.td,{children:"Lower = higher priority"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h3,{id:"cluster-4--student-profile--registration",children:"Cluster 4 \u2014 Student Profile & Registration"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Entities:"})," Student \xb7 EmergencyContact \xb7 StudentProgram \xb7 Enrollment \xb7 GradeCorrection \xb7 Waitlist \xb7 Hold \xb7 CourseChangeHistory"]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'erDiagram\n    Student ||--o{ EmergencyContact : "has"\n    Student ||--o{ StudentProgram : "enrolled in"\n    Student ||--o{ Enrollment : "creates"\n    Student ||--o{ Waitlist : "joins"\n    Student ||--o{ Hold : "subject to"\n    Enrollment ||--o{ GradeCorrection : "corrected by"\n    Section ||--o{ Enrollment : "has"\n    Section ||--o{ Waitlist : "has"\n    Section ||--o{ CourseChangeHistory : "tracks"\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"student",children:"Student"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"Joined-table inheritance; shares PK with User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_number"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{children:"Institutional student ID"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"cumulative_gpa"}),(0,r.jsx)(d.td,{children:"numeric(4,3)"}),(0,r.jsx)(d.td,{children:"[calculated]"}),(0,r.jsx)(d.td,{children:"Derived from completed Enrollments"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"total_credit_hours_completed"}),(0,r.jsx)(d.td,{children:"numeric(6,2)"}),(0,r.jsx)(d.td,{children:"[calculated]"}),(0,r.jsx)(d.td,{children:"Sum of credits for completed courses"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"enrollment_status"}),(0,r.jsx)(d.td,{children:"enum(enrolled, part_time, leave_of_absence, graduated, withdrawn)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'enrolled'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"photo_url"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"admit_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"emergencycontact",children:"EmergencyContact"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"relationship"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Parent"}),", ",(0,r.jsx)(d.code,{children:"Spouse"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"phone"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"email"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_primary"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"studentprogram",children:"StudentProgram"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"program_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Program"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Program"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"catalog_year"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Catalog year under which the student was admitted"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"declared_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, completed, withdrawn)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_primary"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"One primary program per student (enforced at app layer)"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"enrollment",children:"Enrollment"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"section_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Section"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Section"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"enrolled_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"grade"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"A"}),", ",(0,r.jsx)(d.code,{children:"B+"}),", ",(0,r.jsx)(d.code,{children:"W"}),"; null until grade is posted"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"grade_points"}),(0,r.jsx)(d.td,{children:"numeric(4,3)"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Quality points for GPA calculation"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"credits_attempted"}),(0,r.jsx)(d.td,{children:"numeric(4,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Copy of Section\u2192Course.credits at enrollment time"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"completion_status"}),(0,r.jsx)(d.td,{children:"enum(enrolled, withdrawn, completed, incomplete, auditing)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'enrolled'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_repeating"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"True if student previously attempted this course"})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(student_id, section_id)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"gradecorrection",children:"GradeCorrection"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"enrollment_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Enrollment"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"old_grade"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"The grade being replaced"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"new_grade"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"The replacement grade"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reason"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"submitted_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"approved_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"submitted_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"approved_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, approved, rejected)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"waitlist",children:"Waitlist"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"section_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Section"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Section"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"position"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Managed by application; 1 = next in line"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"joined_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"notified_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"When seat-offer notification was sent"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expires_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Deadline to accept an offered seat"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(waiting, offered, declined, expired, enrolled)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'waiting'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(student_id, section_id)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"hold",children:"Hold"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"hold_type"}),(0,r.jsx)(d.td,{children:"enum(financial, academic, administrative, disciplinary)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"description"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"placed_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"placed_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"released_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"released_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"blocks_registration"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT true"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"coursechangehistory",children:"CourseChangeHistory"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"section_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Section"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Section"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"changed_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"changed_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"field_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Name of the changed attribute"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"old_value"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"String representation of the prior value"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"new_value"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"String representation of the new value"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h3,{id:"cluster-5--advising-records--graduation",children:"Cluster 5 \u2014 Advising, Records & Graduation"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Entities:"})," AdvisorAssignment \xb7 AdvisingAppointment \xb7 AdvisingNote \xb7 AcademicPlan \xb7 AcademicPlanEntry \xb7 TranscriptRequest \xb7 DegreeAuditSnapshot \xb7 GraduationApplication \xb7 Ceremony \xb7 CommencementRegistration \xb7 DiplomaOrder"]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'erDiagram\n    Student ||--o{ AdvisorAssignment : "assigned to"\n    Student ||--o{ AdvisingAppointment : "books"\n    AdvisingAppointment ||--o{ AdvisingNote : "generates"\n    Student ||--o{ AcademicPlan : "has"\n    AcademicPlan ||--|{ AcademicPlanEntry : "contains"\n    Student ||--o{ TranscriptRequest : "requests"\n    Student ||--o{ DegreeAuditSnapshot : "has"\n    Student ||--o{ GraduationApplication : "submits"\n    GraduationApplication ||--o| DiplomaOrder : "leads to"\n    Ceremony ||--o{ CommencementRegistration : "has"\n    Student ||--o{ CommencementRegistration : "registers for"\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"advisorassignment",children:"AdvisorAssignment"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"advisor_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"assigned_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"unassigned_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Null while assignment is active"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_primary"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"advisingappointment",children:"AdvisingAppointment"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"advisor_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"scheduled_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"duration_minutes"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 30, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"location"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Physical location or meeting URL"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"appointment_type"}),(0,r.jsx)(d.td,{children:"enum(in_person, virtual, phone)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(scheduled, completed, cancelled, no_show)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'scheduled'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"cancellation_reason"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"advisingnote",children:"AdvisingNote"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"appointment_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 AdvisingAppointment"}),(0,r.jsx)(d.td,{children:"Null for standalone notes"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"advisor_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"content"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_private"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"Private notes not visible to the student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"note_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"academicplan",children:"AcademicPlan"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"advisor_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User; null if student-created"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"target_graduation_term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Term"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Term"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(draft, active, completed)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'draft'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"academicplanentry",children:"AcademicPlanEntry"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"plan_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 AcademicPlan"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Term"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Term"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"course_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Course"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Course"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"note"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(planned, registered, completed, dropped)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'planned'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"transcriptrequest",children:"TranscriptRequest"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"request_type"}),(0,r.jsx)(d.td,{children:"enum(official, unofficial)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"delivery_method"}),(0,r.jsx)(d.td,{children:"enum(pdf, paper, electronic)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"recipient_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"For third-party delivery"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"recipient_email"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"recipient_address"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Mailing address for paper delivery"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"processing_fee"}),(0,r.jsx)(d.td,{children:"numeric(8,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"payment_status"}),(0,r.jsx)(d.td,{children:"enum(unpaid, paid, waived)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'unpaid'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, processing, ready, delivered)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"requested_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"delivered_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"degreeauditsnapshot",children:"DegreeAuditSnapshot"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"program_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Program"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Program"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"snapshot_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"audit_data"}),(0,r.jsx)(d.td,{children:"jsonb"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Full audit result; immutable after creation"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_graduation_clearance"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"True if used as the canonical graduation clearance"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"cleared_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"cleared_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"graduationapplication",children:"GraduationApplication"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"program_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Program"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Program"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Term"}),(0,r.jsx)(d.td,{children:"Expected graduation term; \u2192 Cluster 3: Term"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"applied_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(submitted, under_review, approved, denied, withdrawn)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'submitted'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewer_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewed_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"notes"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"ceremony",children:"Ceremony"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Term"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Term"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Spring 2026 Commencement"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"ceremony_date"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"location"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"capacity"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(scheduled, completed, cancelled)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'scheduled'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"commencementregistration",children:"CommencementRegistration"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"ceremony_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Ceremony"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"registered_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"guest_count"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0, CHECK >= 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"accessibility_needs"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(registered, cancelled)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'registered'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(student_id, ceremony_id)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"diplomaorder",children:"DiplomaOrder"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"graduation_application_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 GraduationApplication"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"mailing_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Name printed on diploma"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"mailing_address"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expedited"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"fee"}),(0,r.jsx)(d.td,{children:"numeric(8,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"payment_status"}),(0,r.jsx)(d.td,{children:"enum(unpaid, paid, waived)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'unpaid'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"ordered_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"shipped_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"tracking_number"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, processing, shipped, delivered)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h3,{id:"cluster-6--billing-transfer-credit-documents--communications",children:"Cluster 6 \u2014 Billing, Transfer Credit, Documents & Communications"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Entities:"})," Charge \xb7 Payment \xb7 SavedPaymentMethod \xb7 FinancialAid \xb7 TransferCreditRequest \xb7 TransferCreditItem \xb7 TransferCreditAppeal \xb7 DocumentType \xb7 Document \xb7 GeneratedDocument \xb7 Notification \xb7 NotificationPreference \xb7 Announcement \xb7 SupportTicket \xb7 TicketMessage \xb7 HelpArticle \xb7 ScheduledReport"]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-mermaid",children:'erDiagram\n    Student ||--o{ Charge : "incurs"\n    Student ||--o{ Payment : "makes"\n    Student ||--o{ SavedPaymentMethod : "stores"\n    Student ||--o{ FinancialAid : "receives"\n    Student ||--o{ TransferCreditRequest : "submits"\n    TransferCreditRequest ||--|{ TransferCreditItem : "contains"\n    TransferCreditItem ||--o{ TransferCreditAppeal : "appealed via"\n    DocumentType ||--o{ Document : "typed by"\n    DocumentType ||--o{ GeneratedDocument : "typed by"\n    Student ||--o{ Document : "has"\n    User ||--o{ Notification : "receives"\n    User ||--o{ NotificationPreference : "sets"\n    User ||--o{ Announcement : "authors"\n    User ||--o{ SupportTicket : "submits"\n    SupportTicket ||--|{ TicketMessage : "has"\n    User ||--o{ HelpArticle : "authors"\n    User ||--o{ ScheduledReport : "creates"\n'})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"charge",children:"Charge"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Term"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Term; null for non-term charges"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"charge_type"}),(0,r.jsx)(d.td,{children:"enum(tuition, fee, fine, other)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"description"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"amount"}),(0,r.jsx)(d.td,{children:"numeric(10,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"due_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, paid, waived, disputed)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"payment",children:"Payment"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"amount"}),(0,r.jsx)(d.td,{children:"numeric(10,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"payment_method"}),(0,r.jsx)(d.td,{children:"enum(credit_card, ach, check, financial_aid, other)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"payment_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reference_number"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Gateway or check reference"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, completed, failed, refunded)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"applied_charges"}),(0,r.jsx)(d.td,{children:"jsonb"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT '[]'"}),(0,r.jsxs)(d.td,{children:["Array of ",(0,r.jsx)(d.code,{children:"{charge_id, amount_applied}"})]})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"savedpaymentmethod",children:"SavedPaymentMethod"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"method_type"}),(0,r.jsx)(d.td,{children:"enum(credit_card, ach)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"last_four"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Last four digits of card or account number"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"card_brand"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Visa"}),", ",(0,r.jsx)(d.code,{children:"Mastercard"}),"; null for ACH"]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expiry_month"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"1\u201312; null for ACH"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expiry_year"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Four-digit year; null for ACH"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"billing_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"billing_address"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"provider_token"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Opaque token from payment gateway; never raw PAN"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_default"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, removed)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"financialaid",children:"FinancialAid"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"term_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Term"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 3: Term"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"aid_type"}),(0,r.jsx)(d.td,{children:"enum(grant, loan, scholarship, work_study)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"source"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Federal Pell"}),", ",(0,r.jsx)(d.code,{children:"Institutional Merit"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"amount_awarded"}),(0,r.jsx)(d.td,{children:"numeric(10,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK >= 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"amount_disbursed"}),(0,r.jsx)(d.td,{children:"numeric(10,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 0, CHECK >= 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"disbursement_date"}),(0,r.jsx)(d.td,{children:"date"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, disbursed, cancelled)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"transfercreditrequest",children:"TransferCreditRequest"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"institution_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"institution_country"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'US'"}),(0,r.jsx)(d.td,{children:"ISO 3166-1 alpha-2"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"submitted_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewer_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewed_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(submitted, under_review, approved, partially_approved, denied)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'submitted'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"transfercredititem",children:"TransferCreditItem"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"request_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 TransferCreditRequest"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"external_course_code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Course code at the external institution"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"external_course_title"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"external_credits"}),(0,r.jsx)(d.td,{children:"numeric(4,2)"}),(0,r.jsx)(d.td,{children:"NOT NULL, CHECK > 0"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"external_grade"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"equivalent_course_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Course"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Course"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"credits_granted"}),(0,r.jsx)(d.td,{children:"numeric(4,2)"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Credits accepted; null until a decision is made"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"decision"}),(0,r.jsx)(d.td,{children:"enum(accepted, rejected, pending)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"decision_notes"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"transfercreditappeal",children:"TransferCreditAppeal"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"item_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 TransferCreditItem"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reason"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"submitted_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewer_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewed_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(submitted, under_review, approved, denied)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'submitted'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"outcome_notes"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"documenttype",children:"DocumentType"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"Official Transcript"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"code"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"OFFICIAL_TRANSCRIPT"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"description"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"retention_years"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Minimum years to retain per policy"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"requires_staff_review"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"Whether uploaded documents need staff review"})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"document",children:"Document"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student; null for institution-level docs"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"document_type_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 DocumentType"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"uploaded_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"file_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Original filename"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"file_size"}),(0,r.jsx)(d.td,{children:"integer"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Bytes"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"mime_type"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"storage_key"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{children:"Object-storage key; never exposed directly"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, under_review, accepted, rejected)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewed_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"reviewed_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"review_notes"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expires_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"generateddocument",children:"GeneratedDocument"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"student_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Student"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 4: Student"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"document_type_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 DocumentType"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"generated_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"template_version"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Version of the document template used"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"file_name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"storage_key"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"generated_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expires_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"notification",children:"Notification"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"channel"}),(0,r.jsx)(d.td,{children:"enum(email, sms, in_app)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"event_type"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"enrollment.confirmed"}),", ",(0,r.jsx)(d.code,{children:"waitlist.offered"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"subject"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"body"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"sent_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"Null if pending"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"read_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{children:"In-app channel only"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(pending, sent, failed, read)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'pending'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"notificationpreference",children:"NotificationPreference"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"event_type"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Matches Notification.event_type"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"channel"}),(0,r.jsx)(d.td,{children:"enum(email, sms, in_app)"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_enabled"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT true"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsxs)(d.blockquote,{children:["\n",(0,r.jsxs)(d.p,{children:["Unique constraint on ",(0,r.jsx)(d.code,{children:"(user_id, event_type, channel)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"announcement",children:"Announcement"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"created_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"title"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"body"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"audience_role"}),(0,r.jsx)(d.td,{children:"enum(all, student, instructor, advisor, academic_staff, registrar, administrator)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'all'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"target_program_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 Program"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 2: Program; null = all programs"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"publish_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"expires_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(draft, published, archived)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'draft'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"supportticket",children:"SupportTicket"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"submitted_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"assigned_to"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"nullable, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"subject"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"category"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"billing"}),", ",(0,r.jsx)(d.code,{children:"registration"}),", ",(0,r.jsx)(d.code,{children:"technical"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"priority"}),(0,r.jsx)(d.td,{children:"enum(low, medium, high, urgent)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'medium'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(open, in_progress, waiting_on_user, resolved, closed)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'open'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"resolved_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"ticketmessage",children:"TicketMessage"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"ticket_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 SupportTicket"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"author_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"body"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"is_internal"}),(0,r.jsx)(d.td,{children:"boolean"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT false"}),(0,r.jsx)(d.td,{children:"Internal notes not visible to the submitter"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"sent_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT now()"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"helparticle",children:"HelpArticle"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"title"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"slug"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(d.td,{children:"URL-safe identifier"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"category"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"registration"}),", ",(0,r.jsx)(d.code,{children:"billing"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"body"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Markdown content"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"author_user_id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"published_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(draft, published, archived)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'draft'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h4,{id:"scheduledreport",children:"ScheduledReport"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Attribute"}),(0,r.jsx)(d.th,{children:"Type"}),(0,r.jsx)(d.th,{children:"Constraints"}),(0,r.jsx)(d.th,{children:"Notes"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"id"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"PK"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"name"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"report_type"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsxs)(d.td,{children:["e.g., ",(0,r.jsx)(d.code,{children:"enrollment_summary"}),", ",(0,r.jsx)(d.code,{children:"grade_distribution"})]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"created_by"}),(0,r.jsx)(d.td,{children:"uuid"}),(0,r.jsx)(d.td,{children:"NOT NULL, FK \u2192 User"}),(0,r.jsx)(d.td,{children:"\u2192 Cluster 1: User"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"recipient_emails"}),(0,r.jsx)(d.td,{children:"text[]"}),(0,r.jsxs)(d.td,{children:["NOT NULL, DEFAULT '","'"]}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"schedule_cron"}),(0,r.jsx)(d.td,{children:"text"}),(0,r.jsx)(d.td,{children:"NOT NULL"}),(0,r.jsx)(d.td,{children:"Cron expression"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"last_run_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"next_run_at"}),(0,r.jsx)(d.td,{children:"timestamptz"}),(0,r.jsx)(d.td,{children:"nullable"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"format"}),(0,r.jsx)(d.td,{children:"enum(csv, pdf, xlsx)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'csv'"}),(0,r.jsx)(d.td,{})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"parameters"}),(0,r.jsx)(d.td,{children:"jsonb"}),(0,r.jsxs)(d.td,{children:["NOT NULL, DEFAULT '","'"]}),(0,r.jsx)(d.td,{children:"Report-specific filter and option values"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:"status"}),(0,r.jsx)(d.td,{children:"enum(active, paused)"}),(0,r.jsx)(d.td,{children:"NOT NULL, DEFAULT 'active'"}),(0,r.jsx)(d.td,{})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"4-key-design-decisions",children:"4. Key Design Decisions"}),"\n",(0,r.jsx)(d.h3,{id:"single-table-user-with-joined-table-inheritance-for-student",children:"Single-Table User with Joined-Table Inheritance for Student"}),"\n",(0,r.jsxs)(d.p,{children:["All human principals share the ",(0,r.jsx)(d.code,{children:"User"})," table and authenticate with a single credential. The ",(0,r.jsx)(d.code,{children:"role"})," column determines permissions (RBAC enforced at the application layer). ",(0,r.jsx)(d.code,{children:"Student"})," is a separate profile table whose ",(0,r.jsx)(d.code,{children:"id"})," is a FK to ",(0,r.jsx)(d.code,{children:"User.id"})," (joined-table inheritance pattern). This avoids multi-table polymorphism while keeping the student's extended profile separate from authentication concerns."]}),"\n",(0,r.jsx)(d.h3,{id:"grade-on-enrollment-gradecorrection-as-audit-trail",children:"Grade on Enrollment; GradeCorrection as Audit Trail"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.code,{children:"Enrollment.grade"})," holds the current authoritative grade. Any post-submission change creates a ",(0,r.jsx)(d.code,{children:"GradeCorrection"})," record (an immutable audit entry), preserving the original grade and documenting who submitted and who approved the change. This satisfies FERPA audit requirements without destroying history."]}),"\n",(0,r.jsx)(d.h3,{id:"application-managed-waitlist-position",children:"Application-Managed Waitlist Position"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.code,{children:"Waitlist.position"})," is an integer maintained by the application \u2014 not a DB sequence. The DB enforces ",(0,r.jsx)(d.code,{children:"UNIQUE (student_id, section_id)"})," to prevent duplicate entries. When a student leaves the waitlist, the application re-numbers positions in a single transaction. This keeps logic simple while supporting configurable priority rules (e.g., reserved-seat priority)."]}),"\n",(0,r.jsx)(d.h3,{id:"immutable-degreeauditsnapshot-json-blob",children:"Immutable DegreeAuditSnapshot JSON Blob"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.code,{children:"DegreeAuditSnapshot.audit_data"})," stores the full audit result as ",(0,r.jsx)(d.code,{children:"jsonb"})," at the moment of graduation clearance. This prevents retroactive curriculum changes from invalidating an approved graduation. The snapshot is written once and never mutated; ",(0,r.jsx)(d.code,{children:"is_graduation_clearance = true"})," marks the canonical clearance snapshot."]}),"\n",(0,r.jsx)(d.h3,{id:"optimistic-concurrency-for-section-enrollment",children:"Optimistic Concurrency for Section Enrollment"}),"\n",(0,r.jsxs)(d.p,{children:["Section capacity enforcement (",(0,r.jsx)(d.code,{children:"Section.capacity"})," vs. ",(0,r.jsx)(d.code,{children:"enrolled_count"}),") requires a concurrency-safe check during peak registration. The recommended approach is ",(0,r.jsx)(d.code,{children:"INSERT INTO Enrollment \u2026 RETURNING id"})," combined with a DB ",(0,r.jsx)(d.code,{children:"CHECK"})," constraint or trigger that validates ",(0,r.jsx)(d.code,{children:"enrolled_count < capacity"})," on the Section row. An alternative is ",(0,r.jsx)(d.code,{children:"SELECT \u2026 FOR UPDATE"})," on the Section row, which provides stronger guarantees at the cost of higher lock contention."]}),"\n",(0,r.jsx)(d.h3,{id:"calculated-gpa-and-credit-hours",children:"Calculated GPA and Credit Hours"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.code,{children:"Student.cumulative_gpa"})," and ",(0,r.jsx)(d.code,{children:"Student.total_credit_hours_completed"})," are marked ",(0,r.jsx)(d.code,{children:"[calculated]"}),". The recommended implementation is a ",(0,r.jsx)(d.strong,{children:"PostgreSQL materialized view"})," refreshed on ",(0,r.jsx)(d.code,{children:"INSERT/UPDATE"})," to ",(0,r.jsx)(d.code,{children:"Enrollment"}),", or a trigger that recalculates on grade posting. These values must not be manually writeable columns to avoid inconsistency with the underlying Enrollment records."]}),"\n",(0,r.jsx)(d.h3,{id:"field-level-diff-in-coursechangehistory",children:"Field-Level Diff in CourseChangeHistory"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.code,{children:"CourseChangeHistory"})," stores one row per changed field (",(0,r.jsx)(d.code,{children:"field_name"}),", ",(0,r.jsx)(d.code,{children:"old_value"}),", ",(0,r.jsx)(d.code,{children:"new_value"})," as text). This is easy to implement, query, and test. An alternative is a single JSON-patch blob per change event, which is more compact but requires JSON functions for querying. The current row-per-field design is preferred for readability and compatibility with standard test automation tools."]}),"\n",(0,r.jsx)(d.h3,{id:"payment-gateway-token-storage",children:"Payment Gateway Token Storage"}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.code,{children:"SavedPaymentMethod.provider_token"})," stores only the opaque token returned by the payment gateway (e.g., Stripe, Braintree). Raw card numbers (PAN) are never stored in, transmitted through, or logged by the application tier. This design keeps the system out of PCI DSS scope for card data storage and reduces breach impact."]})]})}function j(e={}){const{wrapper:d}={...(0,n.R)(),...e.components};return d?(0,r.jsx)(d,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},8453(e,d,t){t.d(d,{R:()=>i,x:()=>l});var s=t(6540);const r={},n=s.createContext(r);function i(e){const d=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function l(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(n.Provider,{value:d},e.children)}}}]);